<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Design Patterns ‚Äî For Mobile Developers</title>
  <link href="https://fonts.googleapis.com/css2?family=Space+Mono:wght@400;700&family=DM+Sans:ital,wght@0,300;0,400;0,600;0,700;1,400&display=swap" rel="stylesheet">
  <link rel="stylesheet" href="css/styles.css">
</head>
</head>
<body>

<!-- HERO -->
<div class="hero" id="top">
  <div class="hero-bg"></div>
  <div class="grid-overlay"></div>
  <div id="particles"></div>
  <div class="hero-content">
    <span class="tag">üì± For Android & Flutter Developers</span>
    <h1>Design <span>Patterns</span><br>Decoded</h1>
    <p>Master software design patterns through visual diagrams, real-world analogies, and Android/Flutter code examples ‚Äî all in one place.</p>
    <div class="hero-stats">
      <div class="stat"><span class="stat-num">23+</span><span class="stat-lbl">Patterns</span></div>
      <div class="stat"><span class="stat-num">5</span><span class="stat-lbl">Categories</span></div>
      <div class="stat"><span class="stat-num">2</span><span class="stat-lbl">Languages</span></div>
    </div>
  </div>
  <div class="scroll-hint">scroll <div class="scroll-arrow"></div></div>
</div>

<!-- NAV -->
<nav>
  <div class="nav-logo">{ patterns }</div>
  <a href="#overview" onclick="setActive(this)">Overview</a>
  <a href="#creational" onclick="setActive(this)">Creational</a>
  <a href="#structural" onclick="setActive(this)">Structural</a>
  <a href="#behavioral" onclick="setActive(this)">Behavioral</a>
  <a href="#solid" onclick="setActive(this)">SOLID</a>
  <a href="#architectural" onclick="setActive(this)">Architecture</a>
  <a href="#cheatsheet" onclick="setActive(this)">Cheatsheet</a>
  <a href="#quiz" onclick="setActive(this)">Quiz</a>
</nav>

<!-- OVERVIEW -->
<section id="overview">
  <div class="section-header fade-in">
    <span class="section-label">// start here</span>
    <h2>What are Design Patterns?</h2>
    <p class="section-desc">Reusable solutions to commonly occurring problems in software design. Think of them as blueprints, not code.</p>
  </div>
  <div class="categories fade-in">
    <div class="cat-card creational" onclick="scrollTo('creational')">
      <div class="cat-icon">üèóÔ∏è</div>
      <div class="cat-title">Creational</div>
      <div class="cat-count">5 patterns</div>
    </div>
    <div class="cat-card structural" onclick="scrollTo('structural')">
      <div class="cat-icon">üß©</div>
      <div class="cat-title">Structural</div>
      <div class="cat-count">7 patterns</div>
    </div>
    <div class="cat-card behavioral" onclick="scrollTo('behavioral')">
      <div class="cat-icon">üîÑ</div>
      <div class="cat-title">Behavioral</div>
      <div class="cat-count">11 patterns</div>
    </div>
    <div class="cat-card solid" onclick="scrollTo('solid')">
      <div class="cat-icon">üß±</div>
      <div class="cat-title">SOLID</div>
      <div class="cat-count">5 principles</div>
    </div>
    <div class="cat-card arch" onclick="scrollTo('architectural')">
      <div class="cat-icon">üèõÔ∏è</div>
      <div class="cat-title">Architecture</div>
      <div class="cat-count">3 patterns</div>
    </div>
  </div>
</section>

<!-- CREATIONAL -->
<section id="creational" style="padding-top: 3rem;">
  <div class="section-header fade-in">
    <span class="section-label">// creational patterns</span>
    <h2 style="color: #a78bfa;">üèóÔ∏è Creational Patterns</h2>
    <p class="section-desc">Deal with object creation. Make your code flexible and reusable when creating objects.</p>
  </div>
  <input type="text" class="search-box" placeholder="üîç Search patterns..." id="searchBox" oninput="filterPatterns(this.value)">
  <div class="filter-bar">
    <button class="filter-btn active" onclick="filterByCategory('all', this)">All</button>
    <button class="filter-btn" onclick="filterByCategory('creational', this)" style="border-color:rgba(124,58,237,0.4);color:#a78bfa">Creational</button>
    <button class="filter-btn" onclick="filterByCategory('structural', this)" style="border-color:rgba(8,145,178,0.4);color:#67e8f9">Structural</button>
    <button class="filter-btn" onclick="filterByCategory('behavioral', this)" style="border-color:rgba(16,185,129,0.4);color:#6ee7b7">Behavioral</button>
  </div>
  <div class="patterns-grid" id="patternsGrid">

    <!-- SINGLETON -->
    <div class="pattern-card fade-in" data-cat="creational" data-name="singleton">
      <div class="card-header">
        <div class="card-icon" style="background:rgba(124,58,237,0.15)">üîí</div>
        <div class="card-meta">
          <div class="card-name">Singleton</div>
          <span class="card-cat cat-creational">Creational</span>
        </div>
      </div>
      <div class="card-body">
        <div class="card-desc">Ensures a class has <strong>only one instance</strong> and provides a global access point to it.</div>
        <div class="card-analogy"><strong>üí° Real-world analogy</strong>A country has ONE President. No matter how many times you "ask for the president," you always get the same one.</div>
        <div class="diagram-area">
          <div class="diagram">
            <div class="d-box">Client A</div><div class="d-arrow">‚Üí</div>
            <div class="d-box highlight">Singleton<br><small>_instance</small></div>
            <div class="d-arrow">‚Üê</div><div class="d-box">Client B</div>
          </div>
        </div>
        <br>
        <div class="card-platforms">
          <span class="platform-badge platform-android">Kotlin</span>
          <span class="platform-badge platform-flutter">Dart</span>
        </div>
      </div>
      <button class="expand-btn" onclick="toggleCode(this)">View Code <span class="arrow">‚ñº</span></button>
      <div class="code-panel">
        <div class="code-tabs">
          <div class="code-tab active" onclick="switchTab(this, 'kotlin-1')">Kotlin</div>
          <div class="code-tab" onclick="switchTab(this, 'dart-1')">Dart/Flutter</div>
          <div class="code-tab" onclick="switchTab(this, 'when-1')">When to use</div>
        </div>
        <div class="code-content active" id="kotlin-1"><pre><span class="cm">// Kotlin: Object declaration IS a Singleton</span>
<span class="kw">object</span> <span class="ty">AppDatabase</span> {
    <span class="kw">val</span> <span class="nm">instance</span>: <span class="ty">Room.Database</span> <span class="kw">get</span>() = <span class="nm">_db</span>
    <span class="kw">private var</span> <span class="nm">_db</span>: <span class="ty">AppDatabase</span>? = <span class="kw">null</span>

    <span class="kw">fun</span> <span class="fn">init</span>(context: <span class="ty">Context</span>) {
        <span class="nm">_db</span> = <span class="ty">Room</span>.databaseBuilder(
            context, <span class="ty">AppDatabase</span>::<span class="kw">class</span>.java, <span class="st">"app_db"</span>
        ).build()
    }
}

<span class="cm">// Usage - always same instance</span>
<span class="ty">AppDatabase</span>.<span class="fn">init</span>(applicationContext)
<span class="kw">val</span> <span class="nm">db</span> = <span class="ty">AppDatabase</span>.instance</pre></div>
        <div class="code-content" id="dart-1"><pre><span class="cm">// Dart: Named constructor pattern</span>
<span class="kw">class</span> <span class="ty">ApiService</span> {
  <span class="kw">static final</span> <span class="ty">ApiService</span> <span class="nm">_instance</span> = <span class="ty">ApiService</span>._internal();
  
  <span class="cm">// Factory returns same instance always</span>
  <span class="kw">factory</span> <span class="ty">ApiService</span>() => _instance;
  <span class="ty">ApiService</span>._internal();
  
  <span class="kw">Future</span>&lt;<span class="ty">Response</span>&gt; <span class="fn">get</span>(<span class="ty">String</span> url) async { <span class="cm">/* ... */</span> }
}

<span class="cm">// Usage</span>
<span class="kw">final</span> api1 = <span class="ty">ApiService</span>(); <span class="cm">// same instance</span>
<span class="kw">final</span> api2 = <span class="ty">ApiService</span>(); <span class="cm">// same instance</span>
<span class="fn">print</span>(identical(api1, api2)); <span class="cm">// true</span></pre></div>
        <div class="code-content" id="when-1"><pre><span class="cm">// ‚úÖ USE Singleton for:</span>
<span class="st">- Database connections (Room, SQLite)</span>
<span class="st">- Network clients (Retrofit, Dio)</span>
<span class="st">- Logger instances</span>
<span class="st">- SharedPreferences wrapper</span>
<span class="st">- Firebase instances</span>

<span class="cm">// ‚ùå AVOID for:</span>
<span class="st">- UI-related objects</span>
<span class="st">- Objects that need different configs</span>
<span class="st">- In tests (hard to mock/reset)</span>

<span class="cm">// üí° In Flutter, use GetIt or Riverpod</span>
<span class="cm">// for dependency injection instead</span></pre></div>
      </div>
    </div>

    <!-- FACTORY METHOD -->
    <div class="pattern-card fade-in" data-cat="creational" data-name="factory method">
      <div class="card-header">
        <div class="card-icon" style="background:rgba(124,58,237,0.15)">üè≠</div>
        <div class="card-meta">
          <div class="card-name">Factory Method</div>
          <span class="card-cat cat-creational">Creational</span>
        </div>
      </div>
      <div class="card-body">
        <div class="card-desc">Defines an interface for creating objects, but lets <strong>subclasses decide</strong> which class to instantiate.</div>
        <div class="card-analogy"><strong>üí° Real-world analogy</strong>A food truck üöö. You say "give me a burger," but the truck decides whether it's beef, chicken, or veggie based on the day.</div>
        <div class="diagram-area">
          <div class="diagram">
            <div class="d-box d-interface">Creator<br><small>createProduct()</small></div>
            <div class="d-arrow">‚Üí</div>
            <div style="display:flex;flex-direction:column;gap:0.3rem">
              <div class="d-box highlight">ProductA</div>
              <div class="d-box highlight">ProductB</div>
            </div>
          </div>
        </div>
        <br>
        <div class="card-platforms">
          <span class="platform-badge platform-android">Kotlin</span>
          <span class="platform-badge platform-flutter">Dart</span>
        </div>
      </div>
      <button class="expand-btn" onclick="toggleCode(this)">View Code <span class="arrow">‚ñº</span></button>
      <div class="code-panel">
        <div class="code-tabs">
          <div class="code-tab active" onclick="switchTab(this, 'kotlin-2')">Kotlin</div>
          <div class="code-tab" onclick="switchTab(this, 'dart-2')">Dart/Flutter</div>
        </div>
        <div class="code-content active" id="kotlin-2"><pre><span class="cm">// Android: Different notification creators</span>
<span class="kw">interface</span> <span class="ty">Notification</span> {
    <span class="kw">fun</span> <span class="fn">show</span>(message: <span class="ty">String</span>)
}

<span class="kw">abstract class</span> <span class="ty">NotificationCreator</span> {
    <span class="kw">abstract fun</span> <span class="fn">createNotification</span>(): <span class="ty">Notification</span>
    
    <span class="kw">fun</span> <span class="fn">notify</span>(msg: <span class="ty">String</span>) = <span class="fn">createNotification</span>().<span class="fn">show</span>(msg)
}

<span class="kw">class</span> <span class="ty">PushNotificationCreator</span> : <span class="ty">NotificationCreator</span>() {
    <span class="kw">override fun</span> <span class="fn">createNotification</span>() = <span class="ty">PushNotification</span>()
}
<span class="kw">class</span> <span class="ty">InAppNotificationCreator</span> : <span class="ty">NotificationCreator</span>() {
    <span class="kw">override fun</span> <span class="fn">createNotification</span>() = <span class="ty">InAppNotification</span>()
}</pre></div>
        <div class="code-content" id="dart-2"><pre><span class="cm">// Flutter: Widget factory</span>
<span class="kw">abstract class</span> <span class="ty">ButtonFactory</span> {
  <span class="ty">Widget</span> <span class="fn">createButton</span>(<span class="ty">String</span> label);
}

<span class="kw">class</span> <span class="ty">MaterialButtonFactory</span> <span class="kw">extends</span> <span class="ty">ButtonFactory</span> {
  <span class="op">@override</span>
  <span class="ty">Widget</span> <span class="fn">createButton</span>(<span class="ty">String</span> label) =>
    <span class="ty">ElevatedButton</span>(onPressed: () {}, child: <span class="ty">Text</span>(label));
}

<span class="kw">class</span> <span class="ty">CupertinoButtonFactory</span> <span class="kw">extends</span> <span class="ty">ButtonFactory</span> {
  <span class="op">@override</span>
  <span class="ty">Widget</span> <span class="fn">createButton</span>(<span class="ty">String</span> label) =>
    <span class="ty">CupertinoButton</span>(onPressed: () {}, child: <span class="ty">Text</span>(label));
}</pre></div>
      </div>
    </div>

    <!-- BUILDER -->
    <div class="pattern-card fade-in" data-cat="creational" data-name="builder">
      <div class="card-header">
        <div class="card-icon" style="background:rgba(124,58,237,0.15)">üîß</div>
        <div class="card-meta">
          <div class="card-name">Builder</div>
          <span class="card-cat cat-creational">Creational</span>
        </div>
      </div>
      <div class="card-body">
        <div class="card-desc">Constructs complex objects <strong>step-by-step</strong>. Separates construction from representation.</div>
        <div class="card-analogy"><strong>üí° Real-world analogy</strong>Ordering pizza üçï. You add toppings one by one: base ‚Üí sauce ‚Üí cheese ‚Üí toppings ‚Üí bake.</div>
        <div class="card-platforms">
          <span class="platform-badge platform-android">Kotlin</span>
          <span class="platform-badge platform-flutter">Dart</span>
        </div>
      </div>
      <button class="expand-btn" onclick="toggleCode(this)">View Code <span class="arrow">‚ñº</span></button>
      <div class="code-panel">
        <div class="code-tabs">
          <div class="code-tab active" onclick="switchTab(this, 'kotlin-3')">Kotlin</div>
          <div class="code-tab" onclick="switchTab(this, 'dart-3')">Dart/Flutter</div>
        </div>
        <div class="code-content active" id="kotlin-3"><pre><span class="cm">// Kotlin: AlertDialog.Builder is a classic example!</span>
<span class="ty">AlertDialog</span>.<span class="ty">Builder</span>(context)
    .<span class="fn">setTitle</span>(<span class="st">"Confirm"</span>)
    .<span class="fn">setMessage</span>(<span class="st">"Are you sure?"</span>)
    .<span class="fn">setPositiveButton</span>(<span class="st">"Yes"</span>) { _, _ -> <span class="fn">doAction</span>() }
    .<span class="fn">setNegativeButton</span>(<span class="st">"No"</span>, <span class="kw">null</span>)
    .<span class="fn">setCancelable</span>(<span class="kw">false</span>)
    .<span class="fn">show</span>()

<span class="cm">// Custom builder pattern</span>
<span class="kw">class</span> <span class="ty">HttpRequest</span> <span class="kw">private constructor</span>(<span class="kw">val</span> url: <span class="ty">String</span>, <span class="kw">val</span> method: <span class="ty">String</span>) {
    <span class="kw">class</span> <span class="ty">Builder</span>(private <span class="kw">val</span> url: <span class="ty">String</span>) {
        <span class="kw">private var</span> <span class="nm">method</span> = <span class="st">"GET"</span>
        <span class="kw">fun</span> <span class="fn">method</span>(m: <span class="ty">String</span>) = <span class="fn">also</span> { method = m }
        <span class="kw">fun</span> <span class="fn">build</span>() = <span class="ty">HttpRequest</span>(url, method)
    }
}</pre></div>
        <div class="code-content" id="dart-3"><pre><span class="cm">// Dart: Cascade notation (..) is Builder-like!</span>
<span class="kw">final</span> paint = <span class="ty">Paint</span>()
  ..color = <span class="ty">Colors</span>.blue
  ..strokeWidth = 2.0
  ..style = <span class="ty">PaintingStyle</span>.stroke;

<span class="cm">// Custom Builder</span>
<span class="kw">class</span> <span class="ty">QueryBuilder</span> {
  <span class="ty">String</span> _table = <span class="st">''</span>;
  <span class="ty">List</span>&lt;<span class="ty">String</span>&gt; _conditions = [];
  
  <span class="ty">QueryBuilder</span> <span class="fn">from</span>(<span class="ty">String</span> table) { _table = table; <span class="kw">return this</span>; }
  <span class="ty">QueryBuilder</span> <span class="fn">where</span>(<span class="ty">String</span> cond) { _conditions.add(cond); <span class="kw">return this</span>; }
  <span class="ty">String</span> <span class="fn">build</span>() => <span class="st">'SELECT * FROM $_table WHERE ${_conditions.join(" AND ")}'</span>;
}
<span class="cm">// Usage: QueryBuilder().from('users').where('active=1').build()</span></pre></div>
      </div>
    </div>

    <!-- OBSERVER -->
    <div class="pattern-card fade-in" data-cat="behavioral" data-name="observer">
      <div class="card-header">
        <div class="card-icon" style="background:rgba(16,185,129,0.15)">üëÅÔ∏è</div>
        <div class="card-meta">
          <div class="card-name">Observer</div>
          <span class="card-cat cat-behavioral">Behavioral</span>
        </div>
      </div>
      <div class="card-body">
        <div class="card-desc">Defines a <strong>one-to-many dependency</strong> so that when one object changes state, all dependents are notified automatically.</div>
        <div class="card-analogy"><strong>üí° Real-world analogy</strong>YouTube subscriptions üì∫. When a creator uploads, ALL subscribers get notified ‚Äî not just one.</div>
        <div class="diagram-area">
          <div class="diagram">
            <div class="d-box highlight">Subject<br><small>notifyAll()</small></div>
            <div class="d-arrow">‚Üí</div>
            <div style="display:flex;flex-direction:column;gap:0.3rem">
              <div class="d-box">Observer 1</div>
              <div class="d-box">Observer 2</div>
              <div class="d-box">Observer 3</div>
            </div>
          </div>
        </div>
        <br>
        <div class="card-platforms">
          <span class="platform-badge platform-android">LiveData / Flow</span>
          <span class="platform-badge platform-flutter">Stream / ChangeNotifier</span>
        </div>
      </div>
      <button class="expand-btn" onclick="toggleCode(this)">View Code <span class="arrow">‚ñº</span></button>
      <div class="code-panel">
        <div class="code-tabs">
          <div class="code-tab active" onclick="switchTab(this, 'kotlin-obs')">Kotlin (LiveData)</div>
          <div class="code-tab" onclick="switchTab(this, 'dart-obs')">Flutter (ChangeNotifier)</div>
        </div>
        <div class="code-content active" id="kotlin-obs"><pre><span class="cm">// Android: LiveData IS the Observer pattern!</span>
<span class="kw">class</span> <span class="ty">CartViewModel</span> : <span class="ty">ViewModel</span>() {
    <span class="kw">private val</span> <span class="nm">_items</span> = <span class="ty">MutableLiveData</span>&lt;<span class="ty">List</span>&lt;<span class="ty">Item</span>&gt;&gt;()
    <span class="kw">val</span> <span class="nm">items</span>: <span class="ty">LiveData</span>&lt;<span class="ty">List</span>&lt;<span class="ty">Item</span>&gt;&gt; = _items

    <span class="kw">fun</span> <span class="fn">addItem</span>(item: <span class="ty">Item</span>) {
        <span class="nm">_items</span>.value = <span class="nm">_items</span>.value.orEmpty() + item
    }
}

<span class="cm">// Fragment observes (subscribes)</span>
viewModel.items.<span class="fn">observe</span>(viewLifecycleOwner) { items ->
    <span class="nm">adapter</span>.<span class="fn">submitList</span>(items) <span class="cm">// auto-update UI</span>
}</pre></div>
        <div class="code-content" id="dart-obs"><pre><span class="cm">// Flutter: ChangeNotifier = Observer pattern</span>
<span class="kw">class</span> <span class="ty">CartProvider</span> <span class="kw">extends</span> <span class="ty">ChangeNotifier</span> {
  <span class="ty">List</span>&lt;<span class="ty">Item</span>&gt; _items = [];
  <span class="ty">List</span>&lt;<span class="ty">Item</span>&gt; <span class="kw">get</span> items => _items;

  <span class="kw">void</span> <span class="fn">addItem</span>(<span class="ty">Item</span> item) {
    _items.add(item);
    <span class="fn">notifyListeners</span>(); <span class="cm">// notifies all observers!</span>
  }
}

<span class="cm">// Widget observes (subscribes)</span>
<span class="ty">Consumer</span>&lt;<span class="ty">CartProvider</span>&gt;(
  builder: (ctx, cart, _) => <span class="ty">Text</span>(<span class="st">'Items: ${cart.items.length}'</span>),
)</pre></div>
      </div>
    </div>

    <!-- ADAPTER -->
    <div class="pattern-card fade-in" data-cat="structural" data-name="adapter">
      <div class="card-header">
        <div class="card-icon" style="background:rgba(8,145,178,0.15)">üîå</div>
        <div class="card-meta">
          <div class="card-name">Adapter</div>
          <span class="card-cat cat-structural">Structural</span>
        </div>
      </div>
      <div class="card-body">
        <div class="card-desc">Converts the interface of a class into another interface that clients expect. <strong>Makes incompatible interfaces work together.</strong></div>
        <div class="card-analogy"><strong>üí° Real-world analogy</strong>A power adapter ‚ö°. Your US laptop (3-pin) works in Europe (2-pin) via an adapter. Neither changes, the adapter bridges them.</div>
        <div class="card-platforms">
          <span class="platform-badge platform-android">RecyclerView.Adapter</span>
          <span class="platform-badge platform-flutter">Dart</span>
        </div>
      </div>
      <button class="expand-btn" onclick="toggleCode(this)">View Code <span class="arrow">‚ñº</span></button>
      <div class="code-panel">
        <div class="code-tabs">
          <div class="code-tab active" onclick="switchTab(this, 'kotlin-adp')">Kotlin</div>
          <div class="code-tab" onclick="switchTab(this, 'dart-adp')">Dart</div>
        </div>
        <div class="code-content active" id="kotlin-adp"><pre><span class="cm">// RecyclerView.Adapter IS the Adapter pattern!</span>
<span class="cm">// Your List<User> ‚Üí RecyclerView understands it</span>

<span class="kw">class</span> <span class="ty">UserAdapter</span>(<span class="kw">private val</span> users: <span class="ty">List</span>&lt;<span class="ty">User</span>&gt;) 
    : <span class="ty">RecyclerView</span>.<span class="ty">Adapter</span>&lt;<span class="ty">UserAdapter</span>.<span class="ty">ViewHolder</span>&gt;() {
    
    <span class="kw">inner class</span> <span class="ty">ViewHolder</span>(view: <span class="ty">View</span>) : <span class="ty">RecyclerView</span>.<span class="ty">ViewHolder</span>(view)
    
    <span class="kw">override fun</span> <span class="fn">onBindViewHolder</span>(holder: <span class="ty">ViewHolder</span>, pos: <span class="ty">Int</span>) {
        <span class="cm">// Adapt User data ‚Üí View</span>
        holder.itemView.<span class="fn">findViewById</span>&lt;<span class="ty">TextView</span>&gt;(<span class="nm">R</span>.id.name).text = users[pos].name
    }
    <span class="kw">override fun</span> <span class="fn">getItemCount</span>() = users.size
    <span class="kw">override fun</span> <span class="fn">onCreateViewHolder</span>(...) = <span class="ty">ViewHolder</span>(...)
}</pre></div>
        <div class="code-content" id="dart-adp"><pre><span class="cm">// Adapt an old API to a new interface</span>
<span class="kw">class</span> <span class="ty">OldPaymentService</span> {
  <span class="kw">void</span> <span class="fn">processCard</span>(<span class="ty">String</span> num, <span class="ty">double</span> amount) { <span class="cm">/* old API */</span> }
}

<span class="kw">abstract class</span> <span class="ty">PaymentGateway</span> {
  <span class="kw">void</span> <span class="fn">pay</span>(<span class="ty">Payment</span> p); <span class="cm">// new interface</span>
}

<span class="cm">// Adapter bridges old ‚Üí new</span>
<span class="kw">class</span> <span class="ty">OldPaymentAdapter</span> <span class="kw">implements</span> <span class="ty">PaymentGateway</span> {
  <span class="kw">final</span> <span class="ty">OldPaymentService</span> _old = <span class="ty">OldPaymentService</span>();
  
  <span class="op">@override</span>
  <span class="kw">void</span> <span class="fn">pay</span>(<span class="ty">Payment</span> p) {
    _old.<span class="fn">processCard</span>(p.cardNumber, p.amount); <span class="cm">// translate</span>
  }
}</pre></div>
      </div>
    </div>

    <!-- DECORATOR -->
    <div class="pattern-card fade-in" data-cat="structural" data-name="decorator">
      <div class="card-header">
        <div class="card-icon" style="background:rgba(8,145,178,0.15)">üéÅ</div>
        <div class="card-meta">
          <div class="card-name">Decorator</div>
          <span class="card-cat cat-structural">Structural</span>
        </div>
      </div>
      <div class="card-body">
        <div class="card-desc">Attaches <strong>additional responsibilities to an object dynamically</strong>. Provides a flexible alternative to subclassing.</div>
        <div class="card-analogy"><strong>üí° Real-world analogy</strong>Gift wrapping üéÅ. A book is a book, but you can wrap it, add ribbon, and add a bow ‚Äî each adding behavior without changing the book.</div>
        <div class="card-platforms">
          <span class="platform-badge platform-android">OkHttp Interceptors</span>
          <span class="platform-badge platform-flutter">Widget decoration</span>
        </div>
      </div>
      <button class="expand-btn" onclick="toggleCode(this)">View Code <span class="arrow">‚ñº</span></button>
      <div class="code-panel">
        <div class="code-tabs">
          <div class="code-tab active" onclick="switchTab(this, 'kotlin-dec')">Kotlin</div>
          <div class="code-tab" onclick="switchTab(this, 'dart-dec')">Flutter</div>
        </div>
        <div class="code-content active" id="kotlin-dec"><pre><span class="cm">// OkHttp Interceptors ARE Decorators!</span>
<span class="kw">class</span> <span class="ty">AuthInterceptor</span> : <span class="ty">Interceptor</span> {
    <span class="kw">override fun</span> <span class="fn">intercept</span>(chain: <span class="ty">Interceptor</span>.<span class="ty">Chain</span>): <span class="ty">Response</span> {
        <span class="kw">val</span> request = chain.request().<span class="fn">newBuilder</span>()
            .<span class="fn">addHeader</span>(<span class="st">"Authorization"</span>, <span class="st">"Bearer $token"</span>)
            .<span class="fn">build</span>()
        <span class="kw">return</span> chain.<span class="fn">proceed</span>(request) <span class="cm">// decorates & delegates</span>
    }
}
<span class="cm">// Adding behavior (auth) without changing OkHttpClient!</span>
<span class="ty">OkHttpClient</span>.<span class="ty">Builder</span>()
    .<span class="fn">addInterceptor</span>(<span class="ty">AuthInterceptor</span>())
    .<span class="fn">build</span>()</pre></div>
        <div class="code-content" id="dart-dec"><pre><span class="cm">// Flutter widgets ARE Decorators!</span>
<span class="cm">// Each widget wraps and adds behavior</span>
<span class="ty">Padding</span>(              <span class="cm">// adds padding</span>
  padding: <span class="ty">EdgeInsets</span>.all(<span class="nm">16</span>),
  child: <span class="ty">Opacity</span>(    <span class="cm">// adds transparency</span>
    opacity: <span class="nm">0.8</span>,
    child: <span class="ty">Card</span>(       <span class="cm">// adds elevation</span>
      child: <span class="ty">Text</span>(<span class="st">'Hello'</span>) <span class="cm">// the actual content</span>
    ),
  ),
)</pre></div>
      </div>
    </div>

    <!-- STRATEGY -->
    <div class="pattern-card fade-in" data-cat="behavioral" data-name="strategy">
      <div class="card-header">
        <div class="card-icon" style="background:rgba(16,185,129,0.15)">üéØ</div>
        <div class="card-meta">
          <div class="card-name">Strategy</div>
          <span class="card-cat cat-behavioral">Behavioral</span>
        </div>
      </div>
      <div class="card-body">
        <div class="card-desc">Defines a family of algorithms, encapsulates each one, and makes them <strong>interchangeable at runtime</strong>.</div>
        <div class="card-analogy"><strong>üí° Real-world analogy</strong>Navigation app üó∫Ô∏è. You choose a route strategy: fastest, shortest, avoid-tolls. Same destination, different algorithm.</div>
        <div class="card-platforms">
          <span class="platform-badge platform-android">Kotlin</span>
          <span class="platform-badge platform-flutter">Dart</span>
        </div>
      </div>
      <button class="expand-btn" onclick="toggleCode(this)">View Code <span class="arrow">‚ñº</span></button>
      <div class="code-panel">
        <div class="code-tabs">
          <div class="code-tab active" onclick="switchTab(this, 'kotlin-str')">Kotlin</div>
          <div class="code-tab" onclick="switchTab(this, 'dart-str')">Dart</div>
        </div>
        <div class="code-content active" id="kotlin-str"><pre><span class="cm">// Payment strategy example</span>
<span class="kw">interface</span> <span class="ty">PaymentStrategy</span> {
    <span class="kw">fun</span> <span class="fn">pay</span>(amount: <span class="ty">Double</span>)
}
<span class="kw">class</span> <span class="ty">CreditCardPayment</span> : <span class="ty">PaymentStrategy</span> {
    <span class="kw">override fun</span> <span class="fn">pay</span>(amount: <span class="ty">Double</span>) = <span class="fn">println</span>(<span class="st">"Card: $amount"</span>)
}
<span class="kw">class</span> <span class="ty">UPIPayment</span> : <span class="ty">PaymentStrategy</span> {
    <span class="kw">override fun</span> <span class="fn">pay</span>(amount: <span class="ty">Double</span>) = <span class="fn">println</span>(<span class="st">"UPI: $amount"</span>)
}
<span class="kw">class</span> <span class="ty">Checkout</span>(<span class="kw">private var</span> strategy: <span class="ty">PaymentStrategy</span>) {
    <span class="kw">fun</span> <span class="fn">setStrategy</span>(s: <span class="ty">PaymentStrategy</span>) { strategy = s }
    <span class="kw">fun</span> <span class="fn">processPayment</span>(amount: <span class="ty">Double</span>) = strategy.<span class="fn">pay</span>(amount)
}</pre></div>
        <div class="code-content" id="dart-str"><pre><span class="cm">// Dart: Using function types as strategies</span>
<span class="kw">typedef</span> <span class="ty">SortStrategy</span>&lt;T&gt; = <span class="ty">List</span>&lt;T&gt; <span class="ty">Function</span>(<span class="ty">List</span>&lt;T&gt; items);

<span class="ty">List</span>&lt;<span class="ty">Product</span>&gt; <span class="fn">sortByPrice</span>(<span class="ty">List</span>&lt;<span class="ty">Product</span>&gt; items) {
  <span class="kw">return</span> [...items]..sort((a, b) => a.price.<span class="fn">compareTo</span>(b.price));
}
<span class="ty">List</span>&lt;<span class="ty">Product</span>&gt; <span class="fn">sortByRating</span>(<span class="ty">List</span>&lt;<span class="ty">Product</span>&gt; items) {
  <span class="kw">return</span> [...items]..sort((a, b) => b.rating.<span class="fn">compareTo</span>(a.rating));
}

<span class="kw">class</span> <span class="ty">ProductList</span> {
  <span class="ty">SortStrategy</span>&lt;<span class="ty">Product</span>&gt; sortStrategy = sortByPrice;
  <span class="kw">void</span> <span class="fn">display</span>(<span class="ty">List</span>&lt;<span class="ty">Product</span>&gt; items) {
    <span class="kw">final</span> sorted = <span class="fn">sortStrategy</span>(items);
    <span class="cm">// show sorted items</span>
  }
}</pre></div>
      </div>
    </div>

    <!-- REPOSITORY -->
    <div class="pattern-card fade-in" data-cat="arch" data-name="repository">
      <div class="card-header">
        <div class="card-icon" style="background:rgba(239,68,68,0.15)">üì¶</div>
        <div class="card-meta">
          <div class="card-name">Repository</div>
          <span class="card-cat cat-arch">Architecture</span>
        </div>
      </div>
      <div class="card-body">
        <div class="card-desc">Mediates between the domain and data mapping layers. <strong>Abstracts the data source</strong> (API, DB, cache) from business logic.</div>
        <div class="card-analogy"><strong>üí° Real-world analogy</strong>A librarian üìö. You ask for "a book on design patterns" ‚Äî you don't care if it's in the main shelf, storage, or being ordered online. Librarian handles that.</div>
        <div class="diagram-area">
          <div class="diagram">
            <div class="d-box highlight">ViewModel</div>
            <div class="d-arrow">‚Üí</div>
            <div class="d-box d-interface">Repository<br><small>(interface)</small></div>
            <div class="d-arrow">‚Üí</div>
            <div style="display:flex;flex-direction:column;gap:0.3rem">
              <div class="d-box">Room DB</div>
              <div class="d-box">Remote API</div>
              <div class="d-box">Cache</div>
            </div>
          </div>
        </div>
        <br>
        <div class="card-platforms">
          <span class="platform-badge platform-android">MVVM + Room</span>
          <span class="platform-badge platform-flutter">BLoC / Provider</span>
        </div>
      </div>
      <button class="expand-btn" onclick="toggleCode(this)">View Code <span class="arrow">‚ñº</span></button>
      <div class="code-panel">
        <div class="code-tabs">
          <div class="code-tab active" onclick="switchTab(this, 'kotlin-repo')">Kotlin (Android)</div>
          <div class="code-tab" onclick="switchTab(this, 'dart-repo')">Dart (Flutter)</div>
        </div>
        <div class="code-content active" id="kotlin-repo"><pre><span class="cm">// Interface - abstract the data source</span>
<span class="kw">interface</span> <span class="ty">UserRepository</span> {
    <span class="kw">suspend fun</span> <span class="fn">getUser</span>(id: <span class="ty">Int</span>): <span class="ty">User</span>
    <span class="kw">suspend fun</span> <span class="fn">saveUser</span>(user: <span class="ty">User</span>)
}

<span class="cm">// Implementation decides: DB or API?</span>
<span class="kw">class</span> <span class="ty">UserRepositoryImpl</span>(
    <span class="kw">private val</span> api: <span class="ty">UserApi</span>,
    <span class="kw">private val</span> dao: <span class="ty">UserDao</span>
) : <span class="ty">UserRepository</span> {
    <span class="kw">override suspend fun</span> <span class="fn">getUser</span>(id: <span class="ty">Int</span>): <span class="ty">User</span> {
        <span class="kw">return</span> dao.<span class="fn">getUser</span>(id) ?: api.<span class="fn">fetchUser</span>(id).<span class="kw">also</span> { dao.<span class="fn">insert</span>(it) }
    }
}
<span class="cm">// ViewModel only knows the interface!</span>
<span class="kw">class</span> <span class="ty">UserViewModel</span>(<span class="kw">private val</span> repo: <span class="ty">UserRepository</span>) : <span class="ty">ViewModel</span>()</pre></div>
        <div class="code-content" id="dart-repo"><pre><span class="cm">// Flutter Repository Pattern</span>
<span class="kw">abstract class</span> <span class="ty">ProductRepository</span> {
  <span class="ty">Future</span>&lt;<span class="ty">List</span>&lt;<span class="ty">Product</span>&gt;&gt; <span class="fn">getProducts</span>();
  <span class="ty">Future</span>&lt;<span class="ty">void</span>&gt; <span class="fn">saveProduct</span>(<span class="ty">Product</span> p);
}

<span class="kw">class</span> <span class="ty">ProductRepositoryImpl</span> <span class="kw">implements</span> <span class="ty">ProductRepository</span> {
  <span class="kw">final</span> <span class="ty">ApiClient</span> _api;
  <span class="kw">final</span> <span class="ty">LocalDatabase</span> _db;
  
  <span class="op">@override</span>
  <span class="ty">Future</span>&lt;<span class="ty">List</span>&lt;<span class="ty">Product</span>&gt;&gt; <span class="fn">getProducts</span>() <span class="kw">async</span> {
    <span class="kw">try</span> {
      <span class="kw">final</span> remote = <span class="kw">await</span> _api.<span class="fn">fetchProducts</span>();
      <span class="kw">await</span> _db.<span class="fn">cacheProducts</span>(remote);
      <span class="kw">return</span> remote;
    } <span class="kw">catch</span> (_) {
      <span class="kw">return await</span> _db.<span class="fn">getCachedProducts</span>(); <span class="cm">// fallback</span>
    }
  }
}</pre></div>
      </div>
    </div>

    <!-- FACADE -->
    <div class="pattern-card fade-in" data-cat="structural" data-name="facade">
      <div class="card-header">
        <div class="card-icon" style="background:rgba(8,145,178,0.15)">üèõÔ∏è</div>
        <div class="card-meta">
          <div class="card-name">Facade</div>
          <span class="card-cat cat-structural">Structural</span>
        </div>
      </div>
      <div class="card-body">
        <div class="card-desc">Provides a <strong>simplified, unified interface</strong> to a complex subsystem. Hides the complexity behind a clean API.</div>
        <div class="card-analogy"><strong>üí° Real-world analogy</strong>TV remote üì∫. You press "Watch Netflix" and it automatically turns on the TV, switches HDMI input, opens the app ‚Äî you don't manage each device separately.</div>
        <div class="card-platforms">
          <span class="platform-badge platform-android">Kotlin</span>
          <span class="platform-badge platform-ios">Swift</span>
          <span class="platform-badge platform-flutter">Dart</span>
        </div>
      </div>
      <button class="expand-btn" onclick="toggleCode(this)">View Code <span class="arrow">‚ñº</span></button>
      <div class="code-panel">
        <div class="code-tabs">
          <div class="code-tab active" onclick="switchTab(this, 'kotlin-fac')">Kotlin</div>
          <div class="code-tab" onclick="switchTab(this, 'dart-fac')">Dart</div>
        </div>
        <div class="code-content active" id="kotlin-fac"><pre><span class="cm">// Complex subsystems</span>
<span class="kw">class</span> <span class="ty">NetworkModule</span>  { <span class="kw">fun</span> <span class="fn">connect</span>() {} }
<span class="kw">class</span> <span class="ty">AuthModule</span>     { <span class="kw">fun</span> <span class="fn">login</span>(token: <span class="ty">String</span>) {} }
<span class="kw">class</span> <span class="ty">CacheModule</span>    { <span class="kw">fun</span> <span class="fn">warmUp</span>() {} }
<span class="kw">class</span> <span class="ty">AnalyticsModule</span>{ <span class="kw">fun</span> <span class="fn">init</span>() {} }

<span class="cm">// Facade ‚Äî one call to rule them all</span>
<span class="kw">class</span> <span class="ty">AppInitFacade</span> {
    <span class="kw">private val</span> network   = <span class="ty">NetworkModule</span>()
    <span class="kw">private val</span> auth      = <span class="ty">AuthModule</span>()
    <span class="kw">private val</span> cache     = <span class="ty">CacheModule</span>()
    <span class="kw">private val</span> analytics = <span class="ty">AnalyticsModule</span>()
    
    <span class="kw">fun</span> <span class="fn">initApp</span>(userToken: <span class="ty">String</span>) {
        network.<span class="fn">connect</span>()
        auth.<span class="fn">login</span>(userToken)
        cache.<span class="fn">warmUp</span>()
        analytics.<span class="fn">init</span>()
    }
}
<span class="cm">// Usage ‚Äî simple!</span>
<span class="ty">AppInitFacade</span>().<span class="fn">initApp</span>(token)</pre></div>
        <div class="code-content" id="dart-fac"><pre><span class="cm">// Facade for app initialization in Flutter</span>
<span class="kw">class</span> <span class="ty">AppInitFacade</span> {
    <span class="kw">final</span> _network   = <span class="ty">NetworkModule</span>();
    <span class="kw">final</span> _auth      = <span class="ty">AuthModule</span>();
    <span class="kw">final</span> _firebase  = <span class="ty">FirebaseModule</span>();
    
    <span class="ty">Future</span>&lt;<span class="kw">void</span>&gt; <span class="fn">initialize</span>(<span class="ty">String</span> token) <span class="kw">async</span> {
        <span class="kw">await</span> _firebase.<span class="fn">init</span>();
        <span class="kw">await</span> _network.<span class="fn">configure</span>();
        <span class="kw">await</span> _auth.<span class="fn">login</span>(token);
    }
}
<span class="cm">// In main.dart: await AppInitFacade().initialize(token)</span></pre></div>
      </div>
    </div>

    <!-- CHAIN OF RESPONSIBILITY -->
    <div class="pattern-card fade-in" data-cat="behavioral" data-name="chain of responsibility">
      <div class="card-header">
        <div class="card-icon" style="background:rgba(16,185,129,0.15)">‚õìÔ∏è</div>
        <div class="card-meta">
          <div class="card-name">Chain of Responsibility</div>
          <span class="card-cat cat-behavioral">Behavioral</span>
        </div>
      </div>
      <div class="card-body">
        <div class="card-desc">Passes requests along a <strong>chain of handlers</strong>. Each handler decides to process the request or pass it to the next handler.</div>
        <div class="card-analogy"><strong>üí° Real-world analogy</strong>OkHttp Interceptors üîó. A request passes through: Auth interceptor ‚Üí Cache interceptor ‚Üí Logging interceptor ‚Üí Network. Each can handle or pass it along.</div>
        <div class="card-platforms">
          <span class="platform-badge platform-android">Kotlin/OkHttp</span>
          <span class="platform-badge platform-flutter">Dart/Dio</span>
        </div>
      </div>
      <button class="expand-btn" onclick="toggleCode(this)">View Code <span class="arrow">‚ñº</span></button>
      <div class="code-panel">
        <div class="code-tabs">
          <div class="code-tab active" onclick="switchTab(this, 'kotlin-cor')">Kotlin</div>
          <div class="code-tab" onclick="switchTab(this, 'dart-cor')">Dart</div>
        </div>
        <div class="code-content active" id="kotlin-cor"><pre><span class="cm">// OkHttp uses CoR ‚Äî this IS Chain of Responsibility!</span>
<span class="kw">class</span> <span class="ty">AuthInterceptor</span> : <span class="ty">Interceptor</span> {
    <span class="kw">override fun</span> <span class="fn">intercept</span>(chain: <span class="ty">Chain</span>): <span class="ty">Response</span> {
        <span class="kw">val</span> authedRequest = chain.request().<span class="fn">newBuilder</span>()
            .<span class="fn">addHeader</span>(<span class="st">"Authorization"</span>, <span class="st">"Bearer $token"</span>)
            .<span class="fn">build</span>()
        <span class="kw">return</span> chain.<span class="fn">proceed</span>(authedRequest) <span class="cm">// pass to next!</span>
    }
}
<span class="cm">// Stack multiple interceptors = chain of responsibility</span>
<span class="kw">val</span> client = <span class="ty">OkHttpClient</span>.<span class="ty">Builder</span>()
    .<span class="fn">addInterceptor</span>(<span class="ty">AuthInterceptor</span>())
    .<span class="fn">addInterceptor</span>(<span class="ty">CacheInterceptor</span>())
    .<span class="fn">addNetworkInterceptor</span>(<span class="ty">LoggingInterceptor</span>())
    .<span class="fn">build</span>()</pre></div>
        <div class="code-content" id="dart-cor"><pre><span class="cm">// Dio interceptors = Chain of Responsibility!</span>
<span class="kw">class</span> <span class="ty">AuthInterceptor</span> <span class="kw">extends</span> <span class="ty">Interceptor</span> {
    <span class="kw">@override</span>
    <span class="kw">void</span> <span class="fn">onRequest</span>(<span class="ty">RequestOptions</span> options,
        <span class="ty">RequestInterceptorHandler</span> handler) {
        options.headers[<span class="st">'Authorization'</span>] = <span class="st">'Bearer $token'</span>;
        handler.<span class="fn">next</span>(options); <span class="cm">// pass to next!</span>
    }
    <span class="kw">@override</span>
    <span class="kw">void</span> <span class="fn">onError</span>(<span class="ty">DioException</span> err, <span class="ty">ErrorInterceptorHandler</span> handler) {
        <span class="kw">if</span> (err.response?.statusCode == 401) <span class="fn">refreshToken</span>();
        handler.<span class="fn">next</span>(err);
    }
}
<span class="kw">final</span> dio = <span class="ty">Dio</span>()
    ..interceptors.<span class="fn">addAll</span>([<span class="ty">AuthInterceptor</span>(), <span class="ty">LogInterceptor</span>()]);</pre></div>
      </div>
    </div>

    <!-- MVP COMMAND -->
    <div class="pattern-card fade-in" data-cat="behavioral" data-name="command">
      <div class="card-header">
        <div class="card-icon" style="background:rgba(16,185,129,0.15)">üìã</div>
        <div class="card-meta">
          <div class="card-name">Command</div>
          <span class="card-cat cat-behavioral">Behavioral</span>
        </div>
      </div>
      <div class="card-body">
        <div class="card-desc">Encapsulates a request as an object. Enables <strong>undoable operations, queuing,</strong> and logging of requests.</div>
        <div class="card-analogy"><strong>üí° Real-world analogy</strong>A TV remote üì∫. Each button is a command. You can queue commands (macros) and even undo the last one.</div>
        <div class="card-platforms">
          <span class="platform-badge platform-android">Kotlin</span>
          <span class="platform-badge platform-flutter">Dart</span>
        </div>
      </div>
      <button class="expand-btn" onclick="toggleCode(this)">View Code <span class="arrow">‚ñº</span></button>
      <div class="code-panel">
        <div class="code-tabs">
          <div class="code-tab active" onclick="switchTab(this, 'kotlin-cmd')">Kotlin</div>
        </div>
        <div class="code-content active" id="kotlin-cmd"><pre><span class="kw">interface</span> <span class="ty">Command</span> {
    <span class="kw">fun</span> <span class="fn">execute</span>()
    <span class="kw">fun</span> <span class="fn">undo</span>()
}
<span class="kw">class</span> <span class="ty">AddToCartCommand</span>(<span class="kw">val</span> cart: <span class="ty">Cart</span>, <span class="kw">val</span> item: <span class="ty">Item</span>) : <span class="ty">Command</span> {
    <span class="kw">override fun</span> <span class="fn">execute</span>() { cart.<span class="fn">add</span>(item) }
    <span class="kw">override fun</span> <span class="fn">undo</span>() { cart.<span class="fn">remove</span>(item) }
}
<span class="kw">class</span> <span class="ty">CommandHistory</span> {
    <span class="kw">private val</span> stack = <span class="ty">ArrayDeque</span>&lt;<span class="ty">Command</span>&gt;()
    <span class="kw">fun</span> <span class="fn">execute</span>(cmd: <span class="ty">Command</span>) { cmd.<span class="fn">execute</span>(); stack.<span class="fn">addLast</span>(cmd) }
    <span class="kw">fun</span> <span class="fn">undo</span>() { stack.<span class="fn">removeLastOrNull</span>()?.undo() }
}</pre></div>
      </div>
    </div>

    <!-- ABSTRACT FACTORY -->
    <div class="pattern-card fade-in" data-cat="creational" data-name="abstract factory">
      <div class="card-header">
        <div class="card-icon" style="background:rgba(124,58,237,0.15)">üè≠</div>
        <div class="card-meta">
          <div class="card-name">Abstract Factory</div>
          <span class="card-cat cat-creational">Creational</span>
        </div>
      </div>
      <div class="card-body">
        <div class="card-desc">Creates <strong>families of related objects</strong> without specifying concrete classes. A "factory of factories".</div>
        <div class="card-analogy"><strong>üí° Real-world analogy</strong>Theme system üé®. An iOS theme factory creates iOS-styled buttons/dialogs; a Material factory creates Material Design equivalents ‚Äî same interface, different families.</div>
        <div class="card-platforms">
          <span class="platform-badge platform-android">Kotlin</span>
          <span class="platform-badge platform-ios">Swift</span>
          <span class="platform-badge platform-flutter">Dart</span>
        </div>
      </div>
      <button class="expand-btn" onclick="toggleCode(this)">View Code <span class="arrow">‚ñº</span></button>
      <div class="code-panel">
        <div class="code-tabs">
          <div class="code-tab active" onclick="switchTab(this, 'kotlin-af')">Kotlin</div>
          <div class="code-tab" onclick="switchTab(this, 'swift-af')">Swift</div>
          <div class="code-tab" onclick="switchTab(this, 'dart-af')">Dart</div>
        </div>
        <div class="code-content active" id="kotlin-af"><pre><span class="kw">interface</span> <span class="ty">UIFactory</span> {
    <span class="kw">fun</span> <span class="fn">createButton</span>(): <span class="ty">Button</span>
    <span class="kw">fun</span> <span class="fn">createDialog</span>(): <span class="ty">Dialog</span>
}
<span class="kw">class</span> <span class="ty">MaterialFactory</span> : <span class="ty">UIFactory</span> {
    <span class="kw">override fun</span> <span class="fn">createButton</span>() = <span class="ty">MaterialButton</span>()
    <span class="kw">override fun</span> <span class="fn">createDialog</span>() = <span class="ty">MaterialDialog</span>()
}
<span class="cm">// Usage ‚Äî swap factory = switch whole theme</span>
<span class="kw">val</span> factory: <span class="ty">UIFactory</span> = <span class="ty">MaterialFactory</span>()
<span class="kw">val</span> btn = factory.<span class="fn">createButton</span>()</pre></div>
        <div class="code-content" id="swift-af"><pre><span class="kw">protocol</span> <span class="ty">UIFactory</span> {
    <span class="kw">func</span> <span class="fn">createButton</span>() -> <span class="ty">UIButton</span>
    <span class="kw">func</span> <span class="fn">createAlert</span>() -> <span class="ty">UIAlertController</span>
}
<span class="kw">struct</span> <span class="ty">CupertinoFactory</span>: <span class="ty">UIFactory</span> {
    <span class="kw">func</span> <span class="fn">createButton</span>() -> <span class="ty">UIButton</span> { ... }
    <span class="kw">func</span> <span class="fn">createAlert</span>() -> <span class="ty">UIAlertController</span> { ... }
}</pre></div>
        <div class="code-content" id="dart-af"><pre><span class="kw">abstract class</span> <span class="ty">WidgetFactory</span> {
    <span class="ty">Widget</span> <span class="fn">createButton</span>(<span class="ty">String</span> label);
    <span class="ty">Widget</span> <span class="fn">createInput</span>(<span class="ty">String</span> hint);
}
<span class="kw">class</span> <span class="ty">MaterialWidgetFactory</span> <span class="kw">implements</span> <span class="ty">WidgetFactory</span> {
    <span class="kw">@override</span>
    <span class="ty">Widget</span> <span class="fn">createButton</span>(<span class="ty">String</span> label) => <span class="ty">ElevatedButton</span>(
        onPressed: () {}, child: <span class="ty">Text</span>(label));
    <span class="kw">@override</span>
    <span class="ty">Widget</span> <span class="fn">createInput</span>(<span class="ty">String</span> hint) => <span class="ty">TextField</span>(
        decoration: <span class="ty">InputDecoration</span>(hintText: hint));
}</pre></div>
      </div>
    </div>

    <!-- PROTOTYPE -->
    <div class="pattern-card fade-in" data-cat="creational" data-name="prototype">
      <div class="card-header">
        <div class="card-icon" style="background:rgba(124,58,237,0.15)">üß¨</div>
        <div class="card-meta">
          <div class="card-name">Prototype</div>
          <span class="card-cat cat-creational">Creational</span>
        </div>
      </div>
      <div class="card-body">
        <div class="card-desc">Creates new objects by <strong>copying (cloning)</strong> an existing object instead of building from scratch.</div>
        <div class="card-analogy"><strong>üí° Real-world analogy</strong>Duplicating a user profile template üë§. Clone it and just change the name ‚Äî no need to fill every field from scratch.</div>
        <div class="card-platforms">
          <span class="platform-badge platform-android">Kotlin</span>
          <span class="platform-badge platform-ios">Swift</span>
          <span class="platform-badge platform-flutter">Dart</span>
        </div>
      </div>
      <button class="expand-btn" onclick="toggleCode(this)">View Code <span class="arrow">‚ñº</span></button>
      <div class="code-panel">
        <div class="code-tabs">
          <div class="code-tab active" onclick="switchTab(this, 'kotlin-proto')">Kotlin</div>
          <div class="code-tab" onclick="switchTab(this, 'swift-proto')">Swift</div>
          <div class="code-tab" onclick="switchTab(this, 'dart-proto')">Dart</div>
        </div>
        <div class="code-content active" id="kotlin-proto"><pre><span class="cm">// Kotlin data class has copy() built-in! ‚ú®</span>
<span class="kw">data class</span> <span class="ty">UserProfile</span>(
    <span class="kw">val</span> name: <span class="ty">String</span>,
    <span class="kw">val</span> avatar: <span class="ty">String</span>,
    <span class="kw">val</span> isPremium: <span class="ty">Boolean</span> = <span class="kw">false</span>,
    <span class="kw">val</span> theme: <span class="ty">String</span> = <span class="st">"default"</span>
)
<span class="kw">val</span> original = <span class="ty">UserProfile</span>(<span class="st">"Alice"</span>, <span class="st">"avatar1.png"</span>)

<span class="cm">// Clone and modify ‚Äî Prototype pattern!</span>
<span class="kw">val</span> premiumUser = original.<span class="fn">copy</span>(isPremium = <span class="kw">true</span>, theme = <span class="st">"gold"</span>)
<span class="kw">val</span> anotherUser = original.<span class="fn">copy</span>(name = <span class="st">"Bob"</span>)</pre></div>
        <div class="code-content" id="swift-proto"><pre><span class="cm">// Swift: NSCopying protocol</span>
<span class="kw">class</span> <span class="ty">UserProfile</span>: <span class="ty">NSCopying</span> {
    <span class="kw">var</span> name: <span class="ty">String</span>
    <span class="kw">var</span> isPremium: <span class="ty">Bool</span>
    <span class="kw">init</span>(name: <span class="ty">String</span>, isPremium: <span class="ty">Bool</span> = <span class="kw">false</span>) {
        self.name = name; self.isPremium = isPremium
    }
    <span class="kw">func</span> <span class="fn">copy</span>(with zone: <span class="ty">NSZone</span>? = <span class="kw">nil</span>) -> <span class="ty">Any</span> {
        <span class="kw">return</span> <span class="ty">UserProfile</span>(name: name, isPremium: isPremium)
    }
}
<span class="kw">let</span> clone = original.<span class="fn">copy</span>() <span class="kw">as</span>! <span class="ty">UserProfile</span></pre></div>
        <div class="code-content" id="dart-proto"><pre><span class="cm">// Dart: copyWith() is idiomatic prototype</span>
<span class="kw">class</span> <span class="ty">UserProfile</span> {
    <span class="kw">final</span> <span class="ty">String</span> name;
    <span class="kw">final</span> <span class="ty">bool</span> isPremium;
    <span class="kw">const</span> <span class="ty">UserProfile</span>({<span class="kw">required</span> <span class="kw">this</span>.name, <span class="kw">this</span>.isPremium = <span class="kw">false</span>});
    
    <span class="ty">UserProfile</span> <span class="fn">copyWith</span>({<span class="ty">String</span>? name, <span class="ty">bool</span>? isPremium}) =>
        <span class="ty">UserProfile</span>(
            name: name ?? <span class="kw">this</span>.name,
            isPremium: isPremium ?? <span class="kw">this</span>.isPremium,
        );
}
<span class="cm">// Flutter State management uses copyWith everywhere!</span>
<span class="kw">final</span> upgraded = user.<span class="fn">copyWith</span>(isPremium: <span class="kw">true</span>);</pre></div>
      </div>
    </div>

    <!-- PROXY -->
    <div class="pattern-card fade-in" data-cat="structural" data-name="proxy">
      <div class="card-header">
        <div class="card-icon" style="background:rgba(8,145,178,0.15)">üõ°Ô∏è</div>
        <div class="card-meta">
          <div class="card-name">Proxy</div>
          <span class="card-cat cat-structural">Structural</span>
        </div>
      </div>
      <div class="card-body">
        <div class="card-desc">Provides a <strong>surrogate or placeholder</strong> for another object to control access, add caching, or logging.</div>
        <div class="card-analogy"><strong>üí° Real-world analogy</strong>Image loading with Glide/Coil üñºÔ∏è. Before showing the actual image, a proxy checks the cache ‚Äî serving the cached version instantly if available.</div>
        <div class="card-platforms">
          <span class="platform-badge platform-android">Kotlin</span>
          <span class="platform-badge platform-flutter">Dart</span>
        </div>
      </div>
      <button class="expand-btn" onclick="toggleCode(this)">View Code <span class="arrow">‚ñº</span></button>
      <div class="code-panel">
        <div class="code-tabs">
          <div class="code-tab active" onclick="switchTab(this, 'kotlin-proxy')">Kotlin</div>
          <div class="code-tab" onclick="switchTab(this, 'dart-proxy')">Dart</div>
        </div>
        <div class="code-content active" id="kotlin-proxy"><pre><span class="kw">interface</span> <span class="ty">ImageLoader</span> { <span class="kw">fun</span> <span class="fn">load</span>(url: <span class="ty">String</span>): <span class="ty">Bitmap</span> }

<span class="cm">// Real loader ‚Äî expensive network call</span>
<span class="kw">class</span> <span class="ty">NetworkImageLoader</span> : <span class="ty">ImageLoader</span> {
    <span class="kw">override fun</span> <span class="fn">load</span>(url: <span class="ty">String</span>): <span class="ty">Bitmap</span> = <span class="fn">downloadBitmap</span>(url)
}
<span class="cm">// Proxy ‚Äî adds caching without changing interface</span>
<span class="kw">class</span> <span class="ty">CachingProxyLoader</span>(<span class="kw">val</span> real: <span class="ty">ImageLoader</span>) : <span class="ty">ImageLoader</span> {
    <span class="kw">private val</span> cache = <span class="fn">HashMap</span>&lt;<span class="ty">String</span>, <span class="ty">Bitmap</span>&gt;()
    <span class="kw">override fun</span> <span class="fn">load</span>(url: <span class="ty">String</span>): <span class="ty">Bitmap</span> {
        <span class="kw">return</span> cache.<span class="fn">getOrPut</span>(url) { real.<span class="fn">load</span>(url) }
    }
}
<span class="cm">// Usage ‚Äî transparent to caller</span>
<span class="kw">val</span> loader: <span class="ty">ImageLoader</span> = <span class="ty">CachingProxyLoader</span>(<span class="ty">NetworkImageLoader</span>())</pre></div>
        <div class="code-content" id="dart-proxy"><pre><span class="kw">abstract class</span> <span class="ty">ApiService</span> {
    <span class="ty">Future</span>&lt;<span class="ty">String</span>&gt; <span class="fn">fetchUser</span>(<span class="ty">int</span> id);
}
<span class="kw">class</span> <span class="ty">CachingProxy</span> <span class="kw">implements</span> <span class="ty">ApiService</span> {
    <span class="kw">final</span> <span class="ty">ApiService</span> _real;
    <span class="kw">final</span> _cache = &lt;<span class="ty">int</span>, <span class="ty">String</span>&gt;{};
    <span class="ty">CachingProxy</span>(<span class="kw">this</span>._real);
    <span class="kw">@override</span>
    <span class="ty">Future</span>&lt;<span class="ty">String</span>&gt; <span class="fn">fetchUser</span>(<span class="ty">int</span> id) <span class="kw">async</span> {
        <span class="kw">return</span> _cache[id] ??= <span class="kw">await</span> _real.<span class="fn">fetchUser</span>(id);
    }
}</pre></div>
      </div>
    </div>

    <!-- COMPOSITE -->
    <div class="pattern-card fade-in" data-cat="structural" data-name="composite">
      <div class="card-header">
        <div class="card-icon" style="background:rgba(8,145,178,0.15)">üå≥</div>
        <div class="card-meta">
          <div class="card-name">Composite</div>
          <span class="card-cat cat-structural">Structural</span>
        </div>
      </div>
      <div class="card-body">
        <div class="card-desc">Composes objects into <strong>tree structures</strong>. Lets you treat individual objects and compositions uniformly.</div>
        <div class="card-analogy"><strong>üí° Real-world analogy</strong>Flutter widget tree üå≥. A Column contains Rows which contain Texts and Buttons ‚Äî all are Widgets with the same build() method.</div>
        <div class="card-platforms">
          <span class="platform-badge platform-flutter">Dart</span>
          <span class="platform-badge platform-android">Kotlin</span>
        </div>
      </div>
      <button class="expand-btn" onclick="toggleCode(this)">View Code <span class="arrow">‚ñº</span></button>
      <div class="code-panel">
        <div class="code-tabs">
          <div class="code-tab active" onclick="switchTab(this, 'dart-comp')">Dart</div>
          <div class="code-tab" onclick="switchTab(this, 'kotlin-comp')">Kotlin</div>
        </div>
        <div class="code-content active" id="dart-comp"><pre><span class="cm">// Flutter IS a composite pattern!</span>
<span class="cm">// All widgets share the same Widget interface</span>
<span class="ty">Column</span>(children: [      <span class="cm">// Composite</span>
    <span class="ty">Text</span>(<span class="st">'Hello'</span>),          <span class="cm">// Leaf</span>
    <span class="ty">Row</span>(children: [         <span class="cm">// Composite</span>
        <span class="ty">Icon</span>(<span class="ty">Icons</span>.star),   <span class="cm">// Leaf</span>
        <span class="ty">Text</span>(<span class="st">'4.5'</span>),        <span class="cm">// Leaf</span>
    ]),
    <span class="ty">ElevatedButton</span>(        <span class="cm">// Composite (with child)</span>
        onPressed: () {},
        child: <span class="ty">Text</span>(<span class="st">'Buy'</span>), <span class="cm">// Leaf</span>
    ),
])</pre></div>
        <div class="code-content" id="kotlin-comp"><pre><span class="kw">sealed class</span> <span class="ty">FileSystemItem</span> {
    <span class="kw">abstract fun</span> <span class="fn">getSize</span>(): <span class="ty">Long</span>
    <span class="kw">abstract val</span> name: <span class="ty">String</span>
}
<span class="kw">data class</span> <span class="ty">File</span>(<span class="kw">override val</span> name: <span class="ty">String</span>, <span class="kw">val</span> size: <span class="ty">Long</span>): <span class="ty">FileSystemItem</span>() {
    <span class="kw">override fun</span> <span class="fn">getSize</span>() = size
}
<span class="kw">class</span> <span class="ty">Directory</span>(<span class="kw">override val</span> name: <span class="ty">String</span>): <span class="ty">FileSystemItem</span>() {
    <span class="kw">val</span> children = <span class="fn">mutableListOf</span>&lt;<span class="ty">FileSystemItem</span>&gt;()
    <span class="kw">override fun</span> <span class="fn">getSize</span>() = children.<span class="fn">sumOf</span> { it.<span class="fn">getSize</span>() }
}</pre></div>
      </div>
    </div>

    <!-- BRIDGE -->
    <div class="pattern-card fade-in" data-cat="structural" data-name="bridge">
      <div class="card-header">
        <div class="card-icon" style="background:rgba(8,145,178,0.15)">üåâ</div>
        <div class="card-meta">
          <div class="card-name">Bridge</div>
          <span class="card-cat cat-structural">Structural</span>
        </div>
      </div>
      <div class="card-body">
        <div class="card-desc">Separates an <strong>abstraction from its implementation</strong> so both can vary independently. Avoids class explosion.</div>
        <div class="card-analogy"><strong>üí° Real-world analogy</strong>Notification system üîî. UrgentNotification and InfoNotification (abstraction) can use PushChannel, EmailChannel, or SMSChannel (implementation) independently.</div>
        <div class="card-platforms">
          <span class="platform-badge platform-android">Kotlin</span>
          <span class="platform-badge platform-flutter">Dart</span>
        </div>
      </div>
      <button class="expand-btn" onclick="toggleCode(this)">View Code <span class="arrow">‚ñº</span></button>
      <div class="code-panel">
        <div class="code-tabs">
          <div class="code-tab active" onclick="switchTab(this, 'kotlin-bridge')">Kotlin</div>
          <div class="code-tab" onclick="switchTab(this, 'dart-bridge')">Dart</div>
        </div>
        <div class="code-content active" id="kotlin-bridge"><pre><span class="cm">// Implementation side</span>
<span class="kw">interface</span> <span class="ty">NotificationChannel</span> { <span class="kw">fun</span> <span class="fn">send</span>(msg: <span class="ty">String</span>) }
<span class="kw">class</span> <span class="ty">PushChannel</span> : <span class="ty">NotificationChannel</span> {
    <span class="kw">override fun</span> <span class="fn">send</span>(msg: <span class="ty">String</span>) { <span class="cm">/* Firebase push */</span> }
}
<span class="kw">class</span> <span class="ty">EmailChannel</span> : <span class="ty">NotificationChannel</span> {
    <span class="kw">override fun</span> <span class="fn">send</span>(msg: <span class="ty">String</span>) { <span class="cm">/* Send email */</span> }
}
<span class="cm">// Abstraction side</span>
<span class="kw">abstract class</span> <span class="ty">Notification</span>(<span class="kw">val</span> channel: <span class="ty">NotificationChannel</span>) {
    <span class="kw">abstract fun</span> <span class="fn">notify</span>(message: <span class="ty">String</span>)
}
<span class="kw">class</span> <span class="ty">UrgentNotification</span>(channel: <span class="ty">NotificationChannel</span>) : <span class="ty">Notification</span>(channel) {
    <span class="kw">override fun</span> <span class="fn">notify</span>(msg: <span class="ty">String</span>) = channel.<span class="fn">send</span>(<span class="st">"üö® URGENT: $msg"</span>)
}
<span class="cm">// Mix any abstraction with any implementation!</span>
<span class="ty">UrgentNotification</span>(<span class="ty">PushChannel</span>()).<span class="fn">notify</span>(<span class="st">"Server down"</span>)</pre></div>
        <div class="code-content" id="dart-bridge"><pre><span class="kw">abstract class</span> <span class="ty">RenderEngine</span> { <span class="kw">void</span> <span class="fn">draw</span>(<span class="ty">String</span> shape); }
<span class="kw">class</span> <span class="ty">CanvasEngine</span> <span class="kw">implements</span> <span class="ty">RenderEngine</span> {
    <span class="kw">@override void</span> <span class="fn">draw</span>(<span class="ty">String</span> shape) { <span class="cm">/* Canvas draw */</span> }
}
<span class="kw">abstract class</span> <span class="ty">Shape</span> {
    <span class="kw">final</span> <span class="ty">RenderEngine</span> renderer;
    <span class="ty">Shape</span>(<span class="kw">this</span>.renderer);
    <span class="kw">void</span> <span class="fn">draw</span>();
}
<span class="kw">class</span> <span class="ty">CircleShape</span> <span class="kw">extends</span> <span class="ty">Shape</span> {
    <span class="ty">CircleShape</span>(<span class="kw">super</span>.renderer);
    <span class="kw">@override void</span> <span class="fn">draw</span>() => renderer.<span class="fn">draw</span>(<span class="st">'circle'</span>);
}</pre></div>
      </div>
    </div>

    <!-- FLYWEIGHT -->
    <div class="pattern-card fade-in" data-cat="structural" data-name="flyweight">
      <div class="card-header">
        <div class="card-icon" style="background:rgba(8,145,178,0.15)">ü™∂</div>
        <div class="card-meta">
          <div class="card-name">Flyweight</div>
          <span class="card-cat cat-structural">Structural</span>
        </div>
      </div>
      <div class="card-body">
        <div class="card-desc">Shares common state among many fine-grained objects to <strong>reduce memory usage dramatically</strong>.</div>
        <div class="card-analogy"><strong>üí° Real-world analogy</strong>RecyclerView üìú. Instead of creating 10,000 Views for a list, it reuses a small pool of View holders as you scroll. Uses ~10 views instead of 10,000!</div>
        <div class="card-platforms">
          <span class="platform-badge platform-android">Kotlin</span>
          <span class="platform-badge platform-flutter">Dart</span>
        </div>
      </div>
      <button class="expand-btn" onclick="toggleCode(this)">View Code <span class="arrow">‚ñº</span></button>
      <div class="code-panel">
        <div class="code-tabs">
          <div class="code-tab active" onclick="switchTab(this, 'kotlin-fw')">Kotlin</div>
          <div class="code-tab" onclick="switchTab(this, 'dart-fw')">Dart</div>
        </div>
        <div class="code-content active" id="kotlin-fw"><pre><span class="cm">// Shared intrinsic state</span>
<span class="kw">data class</span> <span class="ty">CharStyle</span>(<span class="kw">val</span> font: <span class="ty">String</span>, <span class="kw">val</span> size: <span class="ty">Int</span>, <span class="kw">val</span> color: <span class="ty">Int</span>)

<span class="kw">object</span> <span class="ty">StyleCache</span> {
    <span class="kw">private val</span> pool = <span class="fn">mutableMapOf</span>&lt;<span class="ty">String</span>, <span class="ty">CharStyle</span>&gt;()
    <span class="kw">fun</span> <span class="fn">get</span>(font: <span class="ty">String</span>, size: <span class="ty">Int</span>, color: <span class="ty">Int</span>): <span class="ty">CharStyle</span> {
        <span class="kw">val</span> key = <span class="st">"$font-$size-$color"</span>
        <span class="kw">return</span> pool.<span class="fn">getOrPut</span>(key) { <span class="ty">CharStyle</span>(font, size, color) }
    }
}
<span class="cm">// 10,000 text chars share ~5 CharStyle objects!</span>
<span class="cm">// RecyclerView is the most famous Flyweight in Android</span></pre></div>
        <div class="code-content" id="dart-fw"><pre><span class="cm">// Flutter uses const widgets as flyweights!</span>
<span class="kw">const</span> <span class="ty">Icon</span>(<span class="ty">Icons</span>.star)   <span class="cm">// Shared instance</span>
<span class="kw">const</span> <span class="ty">SizedBox</span>.shrink() <span class="cm">// Shared instance</span>

<span class="cm">// Custom flyweight pool</span>
<span class="kw">class</span> <span class="ty">IconCache</span> {
    <span class="kw">static final</span> _cache = &lt;<span class="ty">String</span>, <span class="ty">Widget</span>&gt;{};
    <span class="kw">static</span> <span class="ty">Widget</span> <span class="fn">get</span>(<span class="ty">String</span> name) =>
        _cache[name] ??= <span class="ty">Icon</span>(<span class="ty">IconData</span>(<span class="fn">int</span>.<span class="fn">parse</span>(name)));
}
<span class="cm">// The key insight: const makes widgets flyweights!</span>
<span class="cm">// Flutter's framework reuses const widget instances.</span></pre></div>
      </div>
    </div>

    <!-- STATE -->
    <div class="pattern-card fade-in" data-cat="behavioral" data-name="state">
      <div class="card-header">
        <div class="card-icon" style="background:rgba(16,185,129,0.15)">üö¶</div>
        <div class="card-meta">
          <div class="card-name">State</div>
          <span class="card-cat cat-behavioral">Behavioral</span>
        </div>
      </div>
      <div class="card-body">
        <div class="card-desc">Allows an object to <strong>alter its behavior when its state changes</strong>. The object appears to change its class at runtime.</div>
        <div class="card-analogy"><strong>üí° Real-world analogy</strong>UI loading states üì±. Your screen behaves completely differently when Idle vs Loading vs Success vs Error ‚Äî same screen, different state.</div>
        <div class="card-platforms">
          <span class="platform-badge platform-android">Kotlin</span>
          <span class="platform-badge platform-ios">Swift</span>
          <span class="platform-badge platform-flutter">Dart</span>
        </div>
      </div>
      <button class="expand-btn" onclick="toggleCode(this)">View Code <span class="arrow">‚ñº</span></button>
      <div class="code-panel">
        <div class="code-tabs">
          <div class="code-tab active" onclick="switchTab(this, 'kotlin-state')">Kotlin</div>
          <div class="code-tab" onclick="switchTab(this, 'swift-state')">Swift</div>
          <div class="code-tab" onclick="switchTab(this, 'dart-state')">Dart</div>
        </div>
        <div class="code-content active" id="kotlin-state"><pre><span class="cm">// Sealed class is the Kotlin way!</span>
<span class="kw">sealed class</span> <span class="ty">UiState</span>&lt;<span class="kw">out</span> <span class="ty">T</span>&gt; {
    <span class="kw">object</span> <span class="ty">Idle</span>    : <span class="ty">UiState</span>&lt;<span class="ty">Nothing</span>&gt;()
    <span class="kw">object</span> <span class="ty">Loading</span> : <span class="ty">UiState</span>&lt;<span class="ty">Nothing</span>&gt;()
    <span class="kw">data class</span> <span class="ty">Success</span>&lt;<span class="ty">T</span>&gt;(<span class="kw">val</span> data: <span class="ty">T</span>) : <span class="ty">UiState</span>&lt;<span class="ty">T</span>&gt;()
    <span class="kw">data class</span> <span class="ty">Error</span>(<span class="kw">val</span> msg: <span class="ty">String</span>) : <span class="ty">UiState</span>&lt;<span class="ty">Nothing</span>&gt;()
}
<span class="cm">// Exhaustive handling ‚Äî compiler forces you!</span>
<span class="kw">when</span>(state) {
    <span class="ty">UiState.Idle</span>           -> <span class="fn">showEmpty</span>()
    <span class="ty">UiState.Loading</span>        -> <span class="fn">showSpinner</span>()
    <span class="kw">is</span> <span class="ty">UiState.Success</span>     -> <span class="fn">showData</span>(state.data)
    <span class="kw">is</span> <span class="ty">UiState.Error</span>       -> <span class="fn">showError</span>(state.msg)
}</pre></div>
        <div class="code-content" id="swift-state"><pre><span class="kw">enum</span> <span class="ty">UiState</span>&lt;<span class="ty">T</span>&gt; {
    <span class="kw">case</span> idle
    <span class="kw">case</span> loading
    <span class="kw">case</span> success(<span class="ty">T</span>)
    <span class="kw">case</span> error(<span class="ty">String</span>)
}
<span class="cm">// SwiftUI + Combine</span>
<span class="kw">@Published var</span> state: <span class="ty">UiState</span>&lt;[<span class="ty">User</span>]&gt; = .idle
<span class="cm">// In View: switch on state to render UI</span></pre></div>
        <div class="code-content" id="dart-state"><pre><span class="cm">// Flutter BLoC = State pattern in action</span>
<span class="kw">sealed class</span> <span class="ty">UserState</span> {}
<span class="kw">class</span> <span class="ty">UserInitial</span> <span class="kw">extends</span> <span class="ty">UserState</span> {}
<span class="kw">class</span> <span class="ty">UserLoading</span> <span class="kw">extends</span> <span class="ty">UserState</span> {}
<span class="kw">class</span> <span class="ty">UserLoaded</span> <span class="kw">extends</span> <span class="ty">UserState</span> {
    <span class="kw">final</span> <span class="ty">List</span>&lt;<span class="ty">User</span>&gt; users;
    <span class="ty">UserLoaded</span>(<span class="kw">this</span>.users);
}
<span class="cm">// BlocBuilder renders based on state:</span>
<span class="cm">// UserLoading() => CircularProgressIndicator</span>
<span class="cm">// UserLoaded(users) => ListView</span></pre></div>
      </div>
    </div>

    <!-- TEMPLATE METHOD -->
    <div class="pattern-card fade-in" data-cat="behavioral" data-name="template method">
      <div class="card-header">
        <div class="card-icon" style="background:rgba(16,185,129,0.15)">üìã</div>
        <div class="card-meta">
          <div class="card-name">Template Method</div>
          <span class="card-cat cat-behavioral">Behavioral</span>
        </div>
      </div>
      <div class="card-body">
        <div class="card-desc">Defines the <strong>skeleton of an algorithm</strong> in a base class. Subclasses override specific steps without changing the algorithm structure.</div>
        <div class="card-analogy"><strong>üí° Real-world analogy</strong>Android Activity lifecycle üì±. The framework calls onCreate ‚Üí onStart ‚Üí onResume in order (the template). You only override the steps you care about.</div>
        <div class="card-platforms">
          <span class="platform-badge platform-android">Kotlin</span>
          <span class="platform-badge platform-flutter">Dart</span>
        </div>
      </div>
      <button class="expand-btn" onclick="toggleCode(this)">View Code <span class="arrow">‚ñº</span></button>
      <div class="code-panel">
        <div class="code-tabs">
          <div class="code-tab active" onclick="switchTab(this, 'kotlin-tm')">Kotlin</div>
          <div class="code-tab" onclick="switchTab(this, 'dart-tm')">Dart</div>
        </div>
        <div class="code-content active" id="kotlin-tm"><pre><span class="kw">abstract class</span> <span class="ty">DataExporter</span> {
    <span class="cm">// Template method ‚Äî the skeleton (final!)</span>
    <span class="kw">fun</span> <span class="fn">export</span>() {
        <span class="fn">validateData</span>()    <span class="cm">// fixed step</span>
        <span class="fn">formatData</span>()     <span class="cm">// ‚Üê subclass overrides</span>
        <span class="fn">writeOutput</span>()    <span class="cm">// fixed step</span>
        <span class="fn">cleanup</span>()        <span class="cm">// hook (optional override)</span>
    }
    <span class="kw">private fun</span> <span class="fn">validateData</span>() { <span class="cm">/* always same */</span> }
    <span class="kw">abstract fun</span> <span class="fn">formatData</span>()   <span class="cm">// must override</span>
    <span class="kw">private fun</span> <span class="fn">writeOutput</span>() { <span class="cm">/* always same */</span> }
    <span class="kw">open fun</span> <span class="fn">cleanup</span>() { <span class="cm">/* optional hook */</span> }
}
<span class="kw">class</span> <span class="ty">CsvExporter</span> : <span class="ty">DataExporter</span>() {
    <span class="kw">override fun</span> <span class="fn">formatData</span>() { <span class="cm">/* CSV format */</span> }
}
<span class="kw">class</span> <span class="ty">JsonExporter</span> : <span class="ty">DataExporter</span>() {
    <span class="kw">override fun</span> <span class="fn">formatData</span>() { <span class="cm">/* JSON format */</span> }
}</pre></div>
        <div class="code-content" id="dart-tm"><pre><span class="kw">abstract class</span> <span class="ty">DataExporter</span> {
    <span class="cm">// Template method</span>
    <span class="kw">void</span> <span class="fn">export</span>() {
        _validate();
        <span class="fn">format</span>();  <span class="cm">// abstract ‚Äî override me</span>
        _write();
    }
    <span class="kw">void</span> _validate() { <span class="cm">/* fixed */</span> }
    <span class="kw">void</span> <span class="fn">format</span>();  <span class="cm">// subclass must implement</span>
    <span class="kw">void</span> _write() { <span class="cm">/* fixed */</span> }
}
<span class="kw">class</span> <span class="ty">XmlExporter</span> <span class="kw">extends</span> <span class="ty">DataExporter</span> {
    <span class="kw">@override void</span> <span class="fn">format</span>() { <span class="cm">/* XML */</span> }
}</pre></div>
      </div>
    </div>

    <!-- ITERATOR -->
    <div class="pattern-card fade-in" data-cat="behavioral" data-name="iterator">
      <div class="card-header">
        <div class="card-icon" style="background:rgba(16,185,129,0.15)">üîÅ</div>
        <div class="card-meta">
          <div class="card-name">Iterator</div>
          <span class="card-cat cat-behavioral">Behavioral</span>
        </div>
      </div>
      <div class="card-body">
        <div class="card-desc">Provides a way to <strong>sequentially access elements</strong> of a collection without exposing its underlying structure.</div>
        <div class="card-analogy"><strong>üí° Real-world analogy</strong>Cursor in database paging üìÑ. Paging3 in Android gives you a Pager that iterates pages of data without you knowing if it's Room, API, or a hybrid source.</div>
        <div class="card-platforms">
          <span class="platform-badge platform-android">Kotlin</span>
          <span class="platform-badge platform-ios">Swift</span>
          <span class="platform-badge platform-flutter">Dart</span>
        </div>
      </div>
      <button class="expand-btn" onclick="toggleCode(this)">View Code <span class="arrow">‚ñº</span></button>
      <div class="code-panel">
        <div class="code-tabs">
          <div class="code-tab active" onclick="switchTab(this, 'kotlin-iter')">Kotlin</div>
          <div class="code-tab" onclick="switchTab(this, 'dart-iter')">Dart</div>
        </div>
        <div class="code-content active" id="kotlin-iter"><pre><span class="cm">// Kotlin: make any class iterable with operator fun</span>
<span class="kw">class</span> <span class="ty">Playlist</span>(<span class="kw">val</span> songs: <span class="ty">List</span>&lt;<span class="ty">Song</span>&gt;) : <span class="ty">Iterable</span>&lt;<span class="ty">Song</span>&gt; {
    <span class="kw">override fun</span> <span class="fn">iterator</span>(): <span class="ty">Iterator</span>&lt;<span class="ty">Song</span>&gt; = songs.<span class="fn">iterator</span>()
}
<span class="cm">// Usage ‚Äî works in for-in loop!</span>
<span class="kw">for</span> (song <span class="kw">in</span> playlist) { player.<span class="fn">play</span>(song) }

<span class="cm">// Sequence-based lazy iterator (functional)</span>
<span class="kw">val</span> bigList = <span class="fn">sequence</span> {
    <span class="kw">var</span> i = 0
    <span class="kw">while</span> (<span class="kw">true</span>) { <span class="kw">yield</span>(i++) }   <span class="cm">// infinite lazy!</span>
}
bigList.<span class="fn">take</span>(10).<span class="fn">toList</span>() <span class="cm">// take only what you need</span></pre></div>
        <div class="code-content" id="dart-iter"><pre><span class="cm">// Dart: implement Iterable</span>
<span class="kw">class</span> <span class="ty">NumberRange</span> <span class="kw">extends</span> <span class="ty">Iterable</span>&lt;<span class="ty">int</span>&gt; {
    <span class="kw">final int</span> start, end;
    <span class="ty">NumberRange</span>(<span class="kw">this</span>.start, <span class="kw">this</span>.end);
    <span class="kw">@override</span>
    <span class="ty">Iterator</span>&lt;<span class="ty">int</span>&gt; <span class="kw">get</span> iterator => _RangeIterator(start, end);
}
<span class="cm">// Dart generators (lazy iterator)</span>
<span class="ty">Iterable</span>&lt;<span class="ty">int</span>&gt; <span class="fn">evens</span>(<span class="ty">int</span> max) <span class="kw">sync*</span> {
    <span class="kw">for</span> (<span class="kw">int</span> i = 0; i &lt;= max; i += 2) <span class="kw">yield</span> i;
}
<span class="cm">// Usage: for (final n in evens(100)) { ... }</span></pre></div>
      </div>
    </div>

    <!-- MEDIATOR -->
    <div class="pattern-card fade-in" data-cat="behavioral" data-name="mediator">
      <div class="card-header">
        <div class="card-icon" style="background:rgba(16,185,129,0.15)">üóº</div>
        <div class="card-meta">
          <div class="card-name">Mediator</div>
          <span class="card-cat cat-behavioral">Behavioral</span>
        </div>
      </div>
      <div class="card-body">
        <div class="card-desc">Reduces <strong>chaotic dependencies</strong> by centralizing communication. Objects don't talk directly ‚Äî they go through the mediator.</div>
        <div class="card-analogy"><strong>üí° Real-world analogy</strong>Air Traffic Control üõ´. Planes don't talk to each other ‚Äî they all communicate through the tower (mediator). NotificationCenter in iOS IS a mediator.</div>
        <div class="card-platforms">
          <span class="platform-badge platform-android">Kotlin</span>
          <span class="platform-badge platform-ios">Swift</span>
          <span class="platform-badge platform-flutter">Dart</span>
        </div>
      </div>
      <button class="expand-btn" onclick="toggleCode(this)">View Code <span class="arrow">‚ñº</span></button>
      <div class="code-panel">
        <div class="code-tabs">
          <div class="code-tab active" onclick="switchTab(this, 'kotlin-med')">Kotlin</div>
          <div class="code-tab" onclick="switchTab(this, 'swift-med')">Swift</div>
          <div class="code-tab" onclick="switchTab(this, 'dart-med')">Dart</div>
        </div>
        <div class="code-content active" id="kotlin-med"><pre><span class="cm">// EventBus as Mediator</span>
<span class="kw">object</span> <span class="ty">EventBus</span> {
    <span class="kw">private val</span> _events = <span class="ty">MutableSharedFlow</span>&lt;<span class="ty">AppEvent</span>&gt;()
    <span class="kw">val</span> events = _events.<span class="fn">asSharedFlow</span>()
    <span class="kw">suspend fun</span> <span class="fn">emit</span>(event: <span class="ty">AppEvent</span>) = _events.<span class="fn">emit</span>(event)
}
<span class="cm">// Publisher (doesn't know who listens)</span>
<span class="kw">coroutineScope</span>.<span class="fn">launch</span> { <span class="ty">EventBus</span>.<span class="fn">emit</span>(<span class="ty">UserLoggedIn</span>(userId)) }
<span class="cm">// Subscriber (doesn't know who publishes)</span>
<span class="ty">EventBus</span>.events.<span class="fn">filterIsInstance</span>&lt;<span class="ty">UserLoggedIn</span>&gt;()
    .<span class="fn">collect</span> { event -> <span class="fn">updateProfile</span>(event.userId) }</pre></div>
        <div class="code-content" id="swift-med"><pre><span class="cm">// NotificationCenter IS a Mediator!</span>
<span class="cm">// Subscribe:</span>
<span class="ty">NotificationCenter</span>.default.<span class="fn">addObserver</span>(
    forName: .userDidLogin, object: <span class="kw">nil</span>, queue: .main
) { notification <span class="kw">in</span>
    <span class="fn">updateUI</span>(notification.userInfo)
}
<span class="cm">// Publish (from anywhere):</span>
<span class="ty">NotificationCenter</span>.default.<span class="fn">post</span>(
    name: .userDidLogin, object: <span class="kw">nil</span>, userInfo: [<span class="st">"id"</span>: userId]
)</pre></div>
        <div class="code-content" id="dart-med"><pre><span class="cm">// Stream-based Mediator in Dart/Flutter</span>
<span class="kw">class</span> <span class="ty">EventBus</span> {
    <span class="kw">final</span> _ctrl = <span class="ty">StreamController</span>&lt;<span class="kw">dynamic</span>&gt;.broadcast();
    <span class="ty">Stream</span>&lt;<span class="ty">T</span>&gt; <span class="fn">on</span>&lt;<span class="ty">T</span>&gt;() => _ctrl.stream.<span class="fn">whereType</span>&lt;<span class="ty">T</span>&gt;();
    <span class="kw">void</span> <span class="fn">fire</span>(<span class="kw">dynamic</span> event) => _ctrl.<span class="fn">add</span>(event);
    <span class="kw">void</span> <span class="fn">dispose</span>() => _ctrl.<span class="fn">close</span>();
}
<span class="cm">// Usage:</span>
eventBus.<span class="fn">fire</span>(<span class="ty">UserLoggedInEvent</span>(<span class="st">'abc123'</span>));
eventBus.<span class="fn">on</span>&lt;<span class="ty">UserLoggedInEvent</span>&gt;().<span class="fn">listen</span>((e) => <span class="fn">showWelcome</span>(e));</pre></div>
      </div>
    </div>

    <!-- MEMENTO -->
    <div class="pattern-card fade-in" data-cat="behavioral" data-name="memento">
      <div class="card-header">
        <div class="card-icon" style="background:rgba(16,185,129,0.15)">üíæ</div>
        <div class="card-meta">
          <div class="card-name">Memento</div>
          <span class="card-cat cat-behavioral">Behavioral</span>
        </div>
      </div>
      <div class="card-body">
        <div class="card-desc">Captures and externalizes an object's internal state so it can be <strong>restored later</strong> without violating encapsulation.</div>
        <div class="card-analogy"><strong>üí° Real-world analogy</strong>Save game checkpoint üéÆ. The game state is captured as a memento. If you fail a level, you restore from the last checkpoint ‚Äî not from the beginning.</div>
        <div class="card-platforms">
          <span class="platform-badge platform-android">Kotlin</span>
          <span class="platform-badge platform-flutter">Dart</span>
        </div>
      </div>
      <button class="expand-btn" onclick="toggleCode(this)">View Code <span class="arrow">‚ñº</span></button>
      <div class="code-panel">
        <div class="code-tabs">
          <div class="code-tab active" onclick="switchTab(this, 'kotlin-memo')">Kotlin</div>
          <div class="code-tab" onclick="switchTab(this, 'dart-memo')">Dart</div>
        </div>
        <div class="code-content active" id="kotlin-memo"><pre><span class="cm">// Memento ‚Äî captures editor state</span>
<span class="kw">data class</span> <span class="ty">EditorMemento</span>(<span class="kw">val</span> content: <span class="ty">String</span>, <span class="kw">val</span> cursorPos: <span class="ty">Int</span>)

<span class="kw">class</span> <span class="ty">TextEditor</span> {
    <span class="kw">var</span> content = <span class="st">""</span>; <span class="kw">var</span> cursorPos = 0
    <span class="kw">fun</span> <span class="fn">save</span>() = <span class="ty">EditorMemento</span>(content, cursorPos)
    <span class="kw">fun</span> <span class="fn">restore</span>(m: <span class="ty">EditorMemento</span>) {
        content = m.content; cursorPos = m.cursorPos
    }
}
<span class="cm">// Caretaker manages history</span>
<span class="kw">val</span> history = <span class="ty">ArrayDeque</span>&lt;<span class="ty">EditorMemento</span>&gt;()
history.<span class="fn">addLast</span>(editor.<span class="fn">save</span>())  <span class="cm">// Ctrl+S</span>
editor.<span class="fn">restore</span>(history.<span class="fn">removeLast</span>()) <span class="cm">// Ctrl+Z</span></pre></div>
        <div class="code-content" id="dart-memo"><pre><span class="kw">class</span> <span class="ty">FormMemento</span> {
    <span class="kw">final</span> <span class="ty">Map</span>&lt;<span class="ty">String</span>, <span class="ty">String</span>&gt; fields;
    <span class="ty">FormMemento</span>(<span class="ty">Map</span>&lt;<span class="ty">String</span>, <span class="ty">String</span>&gt; fields)
        : fields = <span class="ty">Map</span>.unmodifiable(fields);
}
<span class="kw">class</span> <span class="ty">MultiStepForm</span> {
    <span class="kw">final</span> _fields = &lt;<span class="ty">String</span>, <span class="ty">String</span>&gt;{};
    <span class="ty">FormMemento</span> <span class="fn">save</span>() => <span class="ty">FormMemento</span>(<span class="ty">Map</span>.of(_fields));
    <span class="kw">void</span> <span class="fn">restore</span>(<span class="ty">FormMemento</span> m) {
        _fields..clear()..<span class="fn">addAll</span>(m.fields);
    }
}</pre></div>
      </div>
    </div>

    <!-- VISITOR -->
    <div class="pattern-card fade-in" data-cat="behavioral" data-name="visitor">
      <div class="card-header">
        <div class="card-icon" style="background:rgba(16,185,129,0.15)">üö∂</div>
        <div class="card-meta">
          <div class="card-name">Visitor</div>
          <span class="card-cat cat-behavioral">Behavioral</span>
        </div>
      </div>
      <div class="card-body">
        <div class="card-desc">Lets you <strong>add operations to objects without modifying them</strong>. Separates the algorithm from the object structure it operates on.</div>
        <div class="card-analogy"><strong>üí° Real-world analogy</strong>Code linter üîç. The linter visits each AST node (class, method, if-statement) and applies rules without modifying those nodes ‚Äî the visitor does the work.</div>
        <div class="card-platforms">
          <span class="platform-badge platform-android">Kotlin</span>
          <span class="platform-badge platform-flutter">Dart</span>
        </div>
      </div>
      <button class="expand-btn" onclick="toggleCode(this)">View Code <span class="arrow">‚ñº</span></button>
      <div class="code-panel">
        <div class="code-tabs">
          <div class="code-tab active" onclick="switchTab(this, 'kotlin-vis')">Kotlin</div>
          <div class="code-tab" onclick="switchTab(this, 'dart-vis')">Dart</div>
        </div>
        <div class="code-content active" id="kotlin-vis"><pre><span class="kw">interface</span> <span class="ty">ContentVisitor</span> {
    <span class="kw">fun</span> <span class="fn">visit</span>(text: <span class="ty">TextContent</span>)
    <span class="kw">fun</span> <span class="fn">visit</span>(image: <span class="ty">ImageContent</span>)
    <span class="kw">fun</span> <span class="fn">visit</span>(video: <span class="ty">VideoContent</span>)
}
<span class="kw">interface</span> <span class="ty">Content</span> { <span class="kw">fun</span> <span class="fn">accept</span>(visitor: <span class="ty">ContentVisitor</span>) }
<span class="kw">class</span> <span class="ty">TextContent</span>(<span class="kw">val</span> text: <span class="ty">String</span>): <span class="ty">Content</span> {
    <span class="kw">override fun</span> <span class="fn">accept</span>(v: <span class="ty">ContentVisitor</span>) = v.<span class="fn">visit</span>(<span class="kw">this</span>)
}
<span class="cm">// Add analytics without changing TextContent!</span>
<span class="kw">class</span> <span class="ty">AnalyticsVisitor</span> : <span class="ty">ContentVisitor</span> {
    <span class="kw">override fun</span> <span class="fn">visit</span>(t: <span class="ty">TextContent</span>) { <span class="fn">trackText</span>(t.text) }
    <span class="kw">override fun</span> <span class="fn">visit</span>(i: <span class="ty">ImageContent</span>) { <span class="fn">trackImage</span>() }
    <span class="kw">override fun</span> <span class="fn">visit</span>(v: <span class="ty">VideoContent</span>) { <span class="fn">trackVideo</span>() }
}</pre></div>
        <div class="code-content" id="dart-vis"><pre><span class="kw">abstract class</span> <span class="ty">Visitor</span> {
    <span class="kw">void</span> <span class="fn">visitText</span>(<span class="ty">TextNode</span> node);
    <span class="kw">void</span> <span class="fn">visitImage</span>(<span class="ty">ImageNode</span> node);
}
<span class="kw">abstract class</span> <span class="ty">Node</span> { <span class="kw">void</span> <span class="fn">accept</span>(<span class="ty">Visitor</span> v); }
<span class="kw">class</span> <span class="ty">TextNode</span> <span class="kw">implements</span> <span class="ty">Node</span> {
    <span class="kw">final</span> <span class="ty">String</span> content;
    <span class="ty">TextNode</span>(<span class="kw">this</span>.content);
    <span class="kw">@override void</span> <span class="fn">accept</span>(<span class="ty">Visitor</span> v) => v.<span class="fn">visitText</span>(<span class="kw">this</span>);
}
<span class="kw">class</span> <span class="ty">RenderVisitor</span> <span class="kw">implements</span> <span class="ty">Visitor</span> {
    <span class="kw">@override void</span> <span class="fn">visitText</span>(<span class="ty">TextNode</span> n) => <span class="fn">print</span>(n.content);
    <span class="kw">@override void</span> <span class="fn">visitImage</span>(<span class="ty">ImageNode</span> n) => <span class="fn">renderImg</span>(n);
}</pre></div>
      </div>
    </div>

  </div><!-- end patterns grid -->
</section>

<!-- SOLID PRINCIPLES -->
<section id="solid">
  <div class="section-header fade-in">
    <span class="section-label">// principles</span>
    <h2 style="color: #fcd34d;">üß± SOLID Principles</h2>
    <p class="section-desc">Five principles for writing clean, maintainable, scalable object-oriented code. Every senior dev interview asks about these.</p>
  </div>
  <div class="solid-grid">
    <div class="solid-card fade-in">
      <div class="solid-letter">S</div>
      <div class="solid-name">Single Responsibility</div>
      <div class="solid-full">S ‚Äî Single Responsibility Principle</div>
      <div class="solid-desc">A class should have <strong>only one reason to change</strong>. Each class does one thing, and does it well.</div>
      <div class="solid-example">
        <strong>‚ùå Bad (Android)</strong>UserActivity handles UI + API calls + DB writes.<br><br>
        <strong>‚úÖ Good</strong>UserActivity (UI) ‚Üí UserViewModel (logic) ‚Üí UserRepository (data). Each has ONE job.
      </div>
    </div>
    <div class="solid-card fade-in">
      <div class="solid-letter">O</div>
      <div class="solid-name">Open/Closed</div>
      <div class="solid-full">O ‚Äî Open/Closed Principle</div>
      <div class="solid-desc">Classes should be <strong>open for extension, closed for modification</strong>. Add new behavior without changing existing code.</div>
      <div class="solid-example">
        <strong>‚úÖ Flutter Example</strong>Add a new payment method (CryptoPayment) by implementing PaymentStrategy interface ‚Äî no existing code changes needed.
      </div>
    </div>
    <div class="solid-card fade-in">
      <div class="solid-letter">L</div>
      <div class="solid-name">Liskov Substitution</div>
      <div class="solid-full">L ‚Äî Liskov Substitution Principle</div>
      <div class="solid-desc">Objects of a subclass should be <strong>replaceable with objects of their superclass</strong> without breaking the app.</div>
      <div class="solid-example">
        <strong>‚úÖ Kotlin Example</strong>If UserRepository is expected, UserRepositoryImpl (or MockUserRepository in tests) must work seamlessly as drop-in replacements.
      </div>
    </div>
    <div class="solid-card fade-in">
      <div class="solid-letter">I</div>
      <div class="solid-name">Interface Segregation</div>
      <div class="solid-full">I ‚Äî Interface Segregation Principle</div>
      <div class="solid-desc">Clients should <strong>not be forced to depend on interfaces they don't use</strong>. Prefer many small, specific interfaces.</div>
      <div class="solid-example">
        <strong>‚ùå Bad</strong>interface Animal { fun fly(); fun swim(); fun run() }<br>
        <strong>‚úÖ Good</strong>interface Flyable, Swimmable, Runnable ‚Äî implement only what you need.
      </div>
    </div>
    <div class="solid-card fade-in">
      <div class="solid-letter">D</div>
      <div class="solid-name">Dependency Inversion</div>
      <div class="solid-full">D ‚Äî Dependency Inversion Principle</div>
      <div class="solid-desc">Depend on <strong>abstractions, not concretions</strong>. High-level modules shouldn't depend on low-level modules.</div>
      <div class="solid-example">
        <strong>‚úÖ Android (Hilt/Dagger)</strong>ViewModel depends on UserRepository (interface), not UserRepositoryImpl. Injection provides the real impl (or mock in tests).
      </div>
    </div>
  </div>
</section>

<!-- ARCHITECTURAL PATTERNS -->
<section id="architectural">
  <div class="section-header fade-in">
    <span class="section-label">// architecture</span>
    <h2 style="color: #fca5a5;">üèõÔ∏è Architectural Patterns</h2>
    <p class="section-desc">High-level patterns for structuring your entire app ‚Äî not just a class.</p>
  </div>
  <div class="patterns-grid">
    <div class="pattern-card fade-in" data-cat="arch">
      <div class="card-header">
        <div class="card-icon" style="background:rgba(239,68,68,0.15)">üìê</div>
        <div class="card-meta">
          <div class="card-name">MVVM</div>
          <span class="card-cat cat-arch">Architecture</span>
        </div>
      </div>
      <div class="card-body">
        <div class="card-desc"><strong>Model-View-ViewModel</strong> ‚Äî The standard for Android. ViewModel holds UI state, View observes changes, Model is data/business logic.</div>
        <div class="diagram-area">
          <div class="diagram">
            <div class="d-box">Model<br><small>Data + Logic</small></div>
            <div class="d-arrow">‚Üî</div>
            <div class="d-box highlight">ViewModel<br><small>State + Events</small></div>
            <div class="d-arrow">‚Üê</div>
            <div class="d-box">View<br><small>UI only</small></div>
          </div>
        </div>
        <br>
        <div class="card-platforms">
          <span class="platform-badge platform-android">Android Standard</span>
          <span class="platform-badge platform-flutter">Provider / Riverpod</span>
        </div>
      </div>
      <button class="expand-btn" onclick="toggleCode(this)">View Code <span class="arrow">‚ñº</span></button>
      <div class="code-panel">
        <div class="code-tabs">
          <div class="code-tab active" onclick="switchTab(this, 'kotlin-mvvm')">Kotlin (Android)</div>
          <div class="code-tab" onclick="switchTab(this, 'dart-mvvm')">Dart (Flutter)</div>
        </div>
        <div class="code-content active" id="kotlin-mvvm"><pre><span class="cm">// MODEL</span>
<span class="kw">data class</span> <span class="ty">User</span>(<span class="kw">val</span> id: <span class="ty">Int</span>, <span class="kw">val</span> name: <span class="ty">String</span>)

<span class="cm">// VIEWMODEL - holds state, exposes LiveData</span>
<span class="kw">class</span> <span class="ty">UserViewModel</span>(<span class="kw">private val</span> repo: <span class="ty">UserRepository</span>) : <span class="ty">ViewModel</span>() {
    <span class="kw">val</span> <span class="nm">user</span> = <span class="ty">MutableStateFlow</span>&lt;<span class="ty">UiState</span>&lt;<span class="ty">User</span>&gt;&gt;(<span class="ty">UiState</span>.<span class="ty">Loading</span>)
    
    <span class="kw">fun</span> <span class="fn">loadUser</span>(id: <span class="ty">Int</span>) {
        <span class="fn">viewModelScope</span>.<span class="fn">launch</span> {
            user.value = <span class="ty">UiState</span>.<span class="ty">Success</span>(repo.<span class="fn">getUser</span>(id))
        }
    }
}

<span class="cm">// VIEW - observes, never has logic</span>
viewModel.user.<span class="fn">collect</span> { state ->
    <span class="kw">when</span>(state) {
        <span class="kw">is</span> <span class="ty">UiState</span>.<span class="ty">Success</span> -> binding.name.text = state.data.name
        <span class="kw">is</span> <span class="ty">UiState</span>.<span class="ty">Loading</span> -> binding.progress.<span class="fn">show</span>()
    }
}</pre></div>
        <div class="code-content" id="dart-mvvm"><pre><span class="cm">// Flutter with Provider (MVVM-like)</span>
<span class="cm">// MODEL</span>
<span class="kw">class</span> <span class="ty">User</span> { <span class="kw">final</span> <span class="ty">String</span> name; <span class="ty">User</span>(<span class="kw">this</span>.name); }

<span class="cm">// VIEWMODEL (ChangeNotifier)</span>
<span class="kw">class</span> <span class="ty">UserViewModel</span> <span class="kw">extends</span> <span class="ty">ChangeNotifier</span> {
  <span class="ty">User</span>? _user;
  <span class="kw">bool</span> _loading = <span class="kw">false</span>;
  
  <span class="ty">User</span>? <span class="kw">get</span> user => _user;
  <span class="kw">bool</span> <span class="kw">get</span> loading => _loading;
  
  <span class="kw">Future</span>&lt;<span class="kw">void</span>&gt; <span class="fn">loadUser</span>() <span class="kw">async</span> {
    _loading = <span class="kw">true</span>; <span class="fn">notifyListeners</span>();
    _user = <span class="kw">await</span> _repo.<span class="fn">getUser</span>();
    _loading = <span class="kw">false</span>; <span class="fn">notifyListeners</span>();
  }
}

<span class="cm">// VIEW - just reads state, no logic</span>
<span class="ty">Consumer</span>&lt;<span class="ty">UserViewModel</span>&gt;(builder: (ctx, vm, _) =>
  vm.loading ? <span class="ty">CircularProgressIndicator</span>() : <span class="ty">Text</span>(vm.user?.name ?? <span class="st">''</span>)
)</pre></div>
      </div>
    </div>

    <div class="pattern-card fade-in" data-cat="arch">
      <div class="card-header">
        <div class="card-icon" style="background:rgba(239,68,68,0.15)">üîÄ</div>
        <div class="card-meta">
          <div class="card-name">MVI (Uni-directional)</div>
          <span class="card-cat cat-arch">Architecture</span>
        </div>
      </div>
      <div class="card-body">
        <div class="card-desc"><strong>Model-View-Intent</strong>. Strict uni-directional data flow. User creates Intents ‚Üí Model updates ‚Üí View renders. Popular in Compose & Flutter BLoC.</div>
        <div class="diagram-area">
          <div class="diagram">
            <div class="d-box">View</div>
            <div class="d-arrow">‚Üí Intent ‚Üí</div>
            <div class="d-box highlight">Reducer</div>
            <div class="d-arrow">‚Üí State ‚Üí</div>
            <div class="d-box">View</div>
          </div>
        </div>
        <br>
        <div class="card-platforms">
          <span class="platform-badge platform-android">Compose + Orbit</span>
          <span class="platform-badge platform-flutter">BLoC pattern</span>
        </div>
      </div>
      <button class="expand-btn" onclick="toggleCode(this)">View Code <span class="arrow">‚ñº</span></button>
      <div class="code-panel">
        <div class="code-tabs">
          <div class="code-tab active" onclick="switchTab(this, 'dart-mvi')">Flutter (BLoC)</div>
        </div>
        <div class="code-content active" id="dart-mvi"><pre><span class="cm">// Flutter BLoC = MVI pattern</span>
<span class="cm">// EVENTS (Intents)</span>
<span class="kw">abstract class</span> <span class="ty">CounterEvent</span> {}
<span class="kw">class</span> <span class="ty">IncrementEvent</span> <span class="kw">extends</span> <span class="ty">CounterEvent</span> {}
<span class="kw">class</span> <span class="ty">DecrementEvent</span> <span class="kw">extends</span> <span class="ty">CounterEvent</span> {}

<span class="cm">// STATE</span>
<span class="kw">class</span> <span class="ty">CounterState</span> { <span class="kw">final int</span> count; <span class="ty">CounterState</span>(<span class="kw">this</span>.count); }

<span class="cm">// BLOC (Reducer)</span>
<span class="kw">class</span> <span class="ty">CounterBloc</span> <span class="kw">extends</span> <span class="ty">Bloc</span>&lt;<span class="ty">CounterEvent</span>, <span class="ty">CounterState</span>&gt; {
  <span class="ty">CounterBloc</span>() : <span class="kw">super</span>(<span class="ty">CounterState</span>(<span class="nm">0</span>)) {
    <span class="fn">on</span>&lt;<span class="ty">IncrementEvent</span>&gt;((e, emit) => emit(<span class="ty">CounterState</span>(state.count + <span class="nm">1</span>)));
    <span class="fn">on</span>&lt;<span class="ty">DecrementEvent</span>&gt;((e, emit) => emit(<span class="ty">CounterState</span>(state.count - <span class="nm">1</span>)));
  }
}
<span class="cm">// Data always flows ONE direction: Event ‚Üí BLoC ‚Üí State ‚Üí UI</span></pre></div>
      </div>
    </div>
  </div>
</section>

<!-- CLEAN ARCHITECTURE -->
<section id="clean-arch" style="background:linear-gradient(180deg, transparent, rgba(99,102,241,0.04), transparent);">
  <div class="section-header fade-in">
    <span class="section-label">// clean architecture</span>
    <h2 style="color: #818cf8;">üèõÔ∏è Clean Architecture</h2>
    <p class="section-desc">Uncle Bob's Clean Architecture applied to mobile ‚Äî the gold standard for production apps. Decoupled, testable, and scalable.</p>
  </div>
  <div class="fade-in" style="background:var(--bg2); border:1px solid var(--border); border-radius:16px; padding:2rem; max-width:800px; margin:0 auto;">
    <h3 style="font-size:1.1rem; color:#818cf8; margin-bottom:1.5rem; text-align:center;">The Layer Dependency Rule: Dependencies always point INWARD ‚¨ÖÔ∏è</h3>
    <div style="display:flex; flex-direction:column; gap:8px; margin-bottom:2rem;">
      <div style="background:rgba(236,72,153,0.1); border:1px solid rgba(236,72,153,0.3); border-radius:10px; padding:16px; text-align:center; cursor:default;">
        <strong style="color:#f472b6;">üé® Presentation Layer</strong>
        <div style="color:#94a3b8; font-size:0.85rem; margin-top:4px;">Activities ¬∑ Fragments ¬∑ ViewModels ¬∑ Composables ¬∑ UIViewControllers ¬∑ Widgets</div>
      </div>
      <div style="text-align:center; color:#4b5563; font-size:1.2rem;">‚¨áÔ∏è depends on</div>
      <div style="background:rgba(99,102,241,0.1); border:1px solid rgba(99,102,241,0.3); border-radius:10px; padding:16px; text-align:center; cursor:default;">
        <strong style="color:#818cf8;">üíº Domain Layer (the heart üíô)</strong>
        <div style="color:#94a3b8; font-size:0.85rem; margin-top:4px;">UseCases ¬∑ Entities ¬∑ Repository Interfaces ¬∑ Business Rules ¬∑ NO platform imports!</div>
      </div>
      <div style="text-align:center; color:#4b5563; font-size:1.2rem;">‚¨áÔ∏è depends on</div>
      <div style="background:rgba(245,158,11,0.1); border:1px solid rgba(245,158,11,0.3); border-radius:10px; padding:16px; text-align:center; cursor:default;">
        <strong style="color:#fbbf24;">üíæ Data Layer</strong>
        <div style="color:#94a3b8; font-size:0.85rem; margin-top:4px;">Repository Implementations ¬∑ DataSources ¬∑ DTOs ¬∑ Mappers ¬∑ Room/Realm/CoreData</div>
      </div>
      <div style="text-align:center; color:#4b5563; font-size:1.2rem;">‚¨áÔ∏è depends on</div>
      <div style="background:rgba(34,211,165,0.1); border:1px solid rgba(34,211,165,0.3); border-radius:10px; padding:16px; text-align:center; cursor:default;">
        <strong style="color:#34d399;">üîå Infrastructure</strong>
        <div style="color:#94a3b8; font-size:0.85rem; margin-top:4px;">REST APIs ¬∑ Firebase ¬∑ Room DB ¬∑ SharedPrefs ¬∑ File System ¬∑ Third-Party SDKs</div>
      </div>
    </div>
    <div style="border-top:1px solid var(--border); padding-top:1.5rem;">
      <h4 style="color:#c8d3f5; margin-bottom:1rem;">üìê Kotlin Android Example ‚Äî Full Clean Arch</h4>
      <pre style="background:#0d0f1a; border:1px solid var(--border); border-radius:8px; padding:1rem; overflow-x:auto; font-size:0.78rem; line-height:1.6; color:#c8d3f5;"><span style="color:#7c3aed">// DOMAIN LAYER</span> ‚Äî pure Kotlin, zero Android imports
<span style="color:#7dd3fc">interface</span> <span style="color:#fbbf24">UserRepository</span> {               <span style="color:#4b5563">// interface defined here</span>
    <span style="color:#7dd3fc">suspend fun</span> <span style="color:#60a5fa">getUser</span>(id: Int): User
}
<span style="color:#7dd3fc">class</span> <span style="color:#fbbf24">GetUserUseCase</span>(<span style="color:#7dd3fc">private val</span> repo: <span style="color:#fbbf24">UserRepository</span>) {
    <span style="color:#7dd3fc">suspend operator fun</span> <span style="color:#60a5fa">invoke</span>(id: Int) = repo.<span style="color:#60a5fa">getUser</span>(id)
}

<span style="color:#7c3aed">// DATA LAYER</span> ‚Äî implements domain interface
<span style="color:#7dd3fc">class</span> <span style="color:#fbbf24">UserRepositoryImpl</span>(
    <span style="color:#7dd3fc">private val</span> api: UserApi,
    <span style="color:#7dd3fc">private val</span> db: UserDao
) : <span style="color:#fbbf24">UserRepository</span> {
    <span style="color:#7dd3fc">override suspend fun</span> <span style="color:#60a5fa">getUser</span>(id: Int): User {
        <span style="color:#7dd3fc">return try</span> { api.<span style="color:#60a5fa">fetchUser</span>(id).toDomain() }
               <span style="color:#7dd3fc">catch</span>(e: Exception) { db.<span style="color:#60a5fa">getUser</span>(id).toDomain() }
    }
}

<span style="color:#7c3aed">// PRESENTATION LAYER</span> ‚Äî calls UseCase
<span style="color:#7dd3fc">class</span> <span style="color:#fbbf24">UserViewModel</span>(<span style="color:#7dd3fc">private val</span> getUser: <span style="color:#fbbf24">GetUserUseCase</span>) : <span style="color:#fbbf24">ViewModel</span>() {
    <span style="color:#7dd3fc">val</span> state = MutableStateFlow&lt;UiState&lt;User&gt;&gt;(UiState.Idle)
    <span style="color:#7dd3fc">fun</span> <span style="color:#60a5fa">loadUser</span>(id: Int) = viewModelScope.launch {
        state.value = UiState.Loading
        state.value = UiState.Success(<span style="color:#60a5fa">getUser</span>(id))
    }
}</pre>
    </div>
  </div>

</section>

<!-- CHEATSHEET -->
<section id="cheatsheet">
  <div class="section-header fade-in">
    <span class="section-label">// quick reference</span>
    <h2>üìã Cheatsheet</h2>
    <p class="section-desc">When to use which pattern ‚Äî at a glance.</p>
  </div>
  <div class="cheatsheet fade-in">
    <table class="cheat-table">
      <thead>
        <tr>
          <th>Pattern</th>
          <th>Category</th>
          <th>Use When</th>
          <th>Android/Flutter</th>
        </tr>
      </thead>
      <tbody>
        <tr><td>Singleton</td><td><span class="card-cat cat-creational">Creational</span></td><td>Need one shared instance globally</td><td>DB, Network client, Logger</td></tr>
        <tr><td>Factory Method</td><td><span class="card-cat cat-creational">Creational</span></td><td>Subclasses decide which object to create</td><td>Widget factories, View creators</td></tr>
        <tr><td>Builder</td><td><span class="card-cat cat-creational">Creational</span></td><td>Complex object with many optional params</td><td>AlertDialog.Builder, Retrofit.Builder</td></tr>
        <tr><td>Observer</td><td><span class="card-cat cat-behavioral">Behavioral</span></td><td>One state change ‚Üí many updates needed</td><td>LiveData, Flow, ChangeNotifier, Streams</td></tr>
        <tr><td>Adapter</td><td><span class="card-cat cat-structural">Structural</span></td><td>Incompatible interfaces need to work together</td><td>RecyclerView.Adapter, API adapters</td></tr>
        <tr><td>Decorator</td><td><span class="card-cat cat-structural">Structural</span></td><td>Add behavior without subclassing</td><td>OkHttp Interceptors, Flutter widget nesting</td></tr>
        <tr><td>Strategy</td><td><span class="card-cat cat-behavioral">Behavioral</span></td><td>Multiple algorithms, switchable at runtime</td><td>Payment methods, Sort strategies</td></tr>
        <tr><td>Repository</td><td><span class="card-cat cat-arch">Architecture</span></td><td>Abstract data sources from business logic</td><td>All Android/Flutter MVVM apps</td></tr>
        <tr><td>Command</td><td><span class="card-cat cat-behavioral">Behavioral</span></td><td>Need undo/redo or queueable operations</td><td>Text editors, Action history</td></tr>
        <tr><td>MVVM</td><td><span class="card-cat cat-arch">Architecture</span></td><td>Structuring entire app with reactive UI</td><td>Android standard, Flutter with Provider</td></tr>
        <tr><td>MVI/BLoC</td><td><span class="card-cat cat-arch">Architecture</span></td><td>Strict uni-directional data flow needed</td><td>Flutter BLoC, Compose + Orbit</td></tr>
      </tbody>
    </table>
  </div>
</section>

<!-- QUIZ -->
<section id="quiz">
  <div class="section-header fade-in">
    <span class="section-label">// test yourself</span>
    <h2>üß† Quick Quiz</h2>
    <p class="section-desc">Solidify your knowledge. Get all 5 right!</p>
  </div>
  <div class="quiz-section fade-in">
    <div id="quizContainer"></div>
    <div class="quiz-nav">
      <div class="quiz-progress" id="quizProgress">Question 1 / 5</div>
      <div class="score-badge" id="scoreDisplay"></div>
      <button class="quiz-btn" id="nextBtn" onclick="nextQuestion()" style="display:none">Next ‚Üí</button>
      <button class="quiz-btn" id="restartBtn" onclick="restartQuiz()" style="display:none">Restart üîÑ</button>
    </div>
  </div>
</section>

<footer>
  <p>Built for <strong>Android & Flutter Developers</strong> üì±</p>
  <p style="margin-top: 0.5rem">References: <strong>refactoring.guru</strong> ¬∑ <strong>GoF Design Patterns</strong> ¬∑ Android Architecture Components</p>
  <p style="margin-top: 0.5rem; color: var(--text3)">Creational ¬∑ Structural ¬∑ Behavioral ¬∑ SOLID ¬∑ Architecture</p>
</footer>

  <script src="js/script.js"></script>
</body>
</html>