<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Design Patterns ‚Äî For Mobile Developers</title>
<link href="https://fonts.googleapis.com/css2?family=Space+Mono:wght@400;700&family=DM+Sans:ital,wght@0,300;0,400;0,600;0,700;1,400&display=swap" rel="stylesheet">
<style>
  :root {
    --bg: #0a0e1a;
    --bg2: #111827;
    --bg3: #1a2235;
    --card: #151d2e;
    --border: #1e2d47;
    --accent1: #00d4ff;
    --accent2: #7c3aed;
    --accent3: #10b981;
    --accent4: #f59e0b;
    --accent5: #ef4444;
    --text: #e2e8f0;
    --text2: #94a3b8;
    --text3: #64748b;
    --white: #ffffff;
    --creational: #7c3aed;
    --structural: #0891b2;
    --behavioral: #10b981;
    --solid: #f59e0b;
    --arch: #ef4444;
  }
  * { margin: 0; padding: 0; box-sizing: border-box; }
  html { scroll-behavior: smooth; }
  body {
    background: var(--bg);
    color: var(--text);
    font-family: 'DM Sans', sans-serif;
    line-height: 1.6;
    overflow-x: hidden;
  }

  /* HERO */
  .hero {
    min-height: 100vh;
    display: flex;
    flex-direction: column;
    align-items: center;
    justify-content: center;
    position: relative;
    overflow: hidden;
    padding: 2rem;
  }
  .hero-bg {
    position: absolute; inset: 0;
    background: radial-gradient(ellipse at 20% 50%, rgba(124,58,237,0.15) 0%, transparent 60%),
                radial-gradient(ellipse at 80% 20%, rgba(0,212,255,0.1) 0%, transparent 50%),
                radial-gradient(ellipse at 60% 80%, rgba(16,185,129,0.08) 0%, transparent 50%);
  }
  .grid-overlay {
    position: absolute; inset: 0;
    background-image: linear-gradient(rgba(0,212,255,0.03) 1px, transparent 1px),
                      linear-gradient(90deg, rgba(0,212,255,0.03) 1px, transparent 1px);
    background-size: 60px 60px;
  }
  .hero-content { position: relative; z-index: 1; text-align: center; max-width: 900px; }
  .tag {
    display: inline-block;
    font-family: 'Space Mono', monospace;
    font-size: 0.7rem;
    letter-spacing: 0.2em;
    color: var(--accent1);
    border: 1px solid rgba(0,212,255,0.3);
    padding: 0.3rem 1rem;
    border-radius: 2rem;
    margin-bottom: 1.5rem;
    animation: fadeUp 0.8s ease both;
  }
  .hero h1 {
    font-family: 'Space Mono', monospace;
    font-size: clamp(2.5rem, 6vw, 5.5rem);
    font-weight: 700;
    line-height: 1.05;
    margin-bottom: 1.5rem;
    animation: fadeUp 0.8s ease 0.1s both;
  }
  .hero h1 span { color: var(--accent1); }
  .hero p {
    font-size: 1.15rem;
    color: var(--text2);
    max-width: 600px;
    margin: 0 auto 2.5rem;
    animation: fadeUp 0.8s ease 0.2s both;
  }
  .hero-stats {
    display: flex; gap: 2rem; justify-content: center; flex-wrap: wrap;
    animation: fadeUp 0.8s ease 0.3s both;
  }
  .stat { text-align: center; }
  .stat-num { font-family: 'Space Mono', monospace; font-size: 2rem; font-weight: 700; color: var(--accent1); display: block; }
  .stat-lbl { font-size: 0.8rem; color: var(--text3); text-transform: uppercase; letter-spacing: 0.1em; }
  .scroll-hint {
    position: absolute; bottom: 2rem;
    animation: bounce 2s infinite;
    color: var(--text3); font-size: 0.8rem;
    display: flex; flex-direction: column; align-items: center; gap: 0.5rem;
  }
  .scroll-arrow { width: 20px; height: 20px; border-right: 2px solid var(--accent1); border-bottom: 2px solid var(--accent1); transform: rotate(45deg); }

  /* NAV */
  nav {
    position: sticky; top: 0; z-index: 100;
    background: rgba(10,14,26,0.9);
    backdrop-filter: blur(20px);
    border-bottom: 1px solid var(--border);
    padding: 0 2rem;
    display: flex; align-items: center; gap: 0;
    overflow-x: auto;
    scrollbar-width: none;
  }
  nav::-webkit-scrollbar { display: none; }
  .nav-logo {
    font-family: 'Space Mono', monospace;
    font-size: 0.85rem;
    color: var(--accent1);
    white-space: nowrap;
    padding: 1rem 1.5rem 1rem 0;
    border-right: 1px solid var(--border);
    margin-right: 1rem;
  }
  nav a {
    color: var(--text3);
    text-decoration: none;
    font-size: 0.85rem;
    padding: 1rem 0.9rem;
    white-space: nowrap;
    transition: color 0.2s;
    font-weight: 500;
  }
  nav a:hover { color: var(--text); }
  nav a.active { color: var(--accent1); border-bottom: 2px solid var(--accent1); }

  /* SECTIONS */
  section { padding: 5rem 2rem; max-width: 1200px; margin: 0 auto; }
  .section-header { margin-bottom: 3rem; }
  .section-label {
    font-family: 'Space Mono', monospace;
    font-size: 0.7rem;
    letter-spacing: 0.2em;
    text-transform: uppercase;
    color: var(--text3);
    margin-bottom: 0.75rem;
    display: block;
  }
  h2 { font-size: clamp(1.8rem, 4vw, 2.8rem); font-weight: 700; margin-bottom: 0.75rem; }
  .section-desc { color: var(--text2); max-width: 600px; font-size: 1rem; }

  /* CATEGORY OVERVIEW */
  .categories { display: grid; grid-template-columns: repeat(auto-fit, minmax(200px, 1fr)); gap: 1rem; margin: 3rem 0; }
  .cat-card {
    border: 1px solid var(--border);
    border-radius: 12px;
    padding: 1.5rem;
    cursor: pointer;
    transition: all 0.3s;
    position: relative;
    overflow: hidden;
  }
  .cat-card::before {
    content: ''; position: absolute; inset: 0;
    opacity: 0; transition: opacity 0.3s;
  }
  .cat-card:hover { transform: translateY(-4px); }
  .cat-card.creational { border-color: rgba(124,58,237,0.3); }
  .cat-card.creational::before { background: linear-gradient(135deg, rgba(124,58,237,0.1), transparent); }
  .cat-card.structural { border-color: rgba(8,145,178,0.3); }
  .cat-card.structural::before { background: linear-gradient(135deg, rgba(8,145,178,0.1), transparent); }
  .cat-card.behavioral { border-color: rgba(16,185,129,0.3); }
  .cat-card.behavioral::before { background: linear-gradient(135deg, rgba(16,185,129,0.1), transparent); }
  .cat-card.solid { border-color: rgba(245,158,11,0.3); }
  .cat-card.solid::before { background: linear-gradient(135deg, rgba(245,158,11,0.1), transparent); }
  .cat-card.arch { border-color: rgba(239,68,68,0.3); }
  .cat-card.arch::before { background: linear-gradient(135deg, rgba(239,68,68,0.1), transparent); }
  .cat-card:hover::before { opacity: 1; }
  .cat-icon { font-size: 2rem; margin-bottom: 0.75rem; }
  .cat-title { font-weight: 700; font-size: 1rem; margin-bottom: 0.25rem; }
  .cat-count { font-family: 'Space Mono', monospace; font-size: 0.75rem; color: var(--text3); }

  /* PATTERN CARDS */
  .patterns-grid { display: grid; grid-template-columns: repeat(auto-fill, minmax(340px, 1fr)); gap: 1.5rem; }
  .pattern-card {
    background: var(--card);
    border: 1px solid var(--border);
    border-radius: 16px;
    overflow: hidden;
    transition: all 0.3s;
    cursor: pointer;
  }
  .pattern-card:hover { transform: translateY(-6px); border-color: rgba(0,212,255,0.3); box-shadow: 0 20px 60px rgba(0,0,0,0.4); }
  .card-header {
    padding: 1.5rem;
    display: flex; align-items: flex-start; gap: 1rem;
    border-bottom: 1px solid var(--border);
  }
  .card-icon {
    width: 48px; height: 48px; border-radius: 12px;
    display: flex; align-items: center; justify-content: center;
    font-size: 1.5rem; flex-shrink: 0;
  }
  .card-meta { flex: 1; }
  .card-name { font-weight: 700; font-size: 1.1rem; margin-bottom: 0.25rem; }
  .card-cat {
    font-family: 'Space Mono', monospace;
    font-size: 0.65rem;
    letter-spacing: 0.1em;
    text-transform: uppercase;
    padding: 0.2rem 0.6rem;
    border-radius: 4px;
    display: inline-block;
  }
  .cat-creational { background: rgba(124,58,237,0.2); color: #a78bfa; }
  .cat-structural { background: rgba(8,145,178,0.2); color: #67e8f9; }
  .cat-behavioral { background: rgba(16,185,129,0.2); color: #6ee7b7; }
  .cat-solid { background: rgba(245,158,11,0.2); color: #fcd34d; }
  .cat-arch { background: rgba(239,68,68,0.2); color: #fca5a5; }
  .card-body { padding: 1.5rem; }
  .card-desc { color: var(--text2); font-size: 0.9rem; margin-bottom: 1.25rem; line-height: 1.6; }
  .card-analogy {
    background: var(--bg3);
    border-left: 3px solid var(--accent1);
    padding: 0.75rem 1rem;
    border-radius: 0 8px 8px 0;
    font-size: 0.85rem;
    color: var(--text2);
    margin-bottom: 1.25rem;
  }
  .card-analogy strong { color: var(--accent1); font-size: 0.75rem; text-transform: uppercase; letter-spacing: 0.05em; display: block; margin-bottom: 0.25rem; }
  .card-platforms { display: flex; gap: 0.5rem; flex-wrap: wrap; }
  .platform-badge {
    font-size: 0.75rem;
    padding: 0.2rem 0.6rem;
    border-radius: 4px;
    border: 1px solid var(--border);
    color: var(--text3);
    font-family: 'Space Mono', monospace;
  }
  .platform-android { border-color: rgba(61,220,132,0.4); color: #3ddc84; }
  .platform-flutter { border-color: rgba(0,172,254,0.4); color: #00acfe; }
  .expand-btn {
    width: 100%; padding: 0.75rem;
    background: transparent;
    border: none; border-top: 1px solid var(--border);
    color: var(--text3);
    font-family: 'DM Sans', sans-serif;
    font-size: 0.85rem;
    cursor: pointer;
    transition: all 0.2s;
    display: flex; align-items: center; justify-content: center; gap: 0.5rem;
  }
  .expand-btn:hover { background: var(--bg3); color: var(--accent1); }
  .expand-btn .arrow { transition: transform 0.3s; }
  .expand-btn.open .arrow { transform: rotate(180deg); }

  /* EXPANDED CODE */
  .code-panel {
    max-height: 0; overflow: hidden;
    transition: max-height 0.5s ease;
  }
  .code-panel.open { max-height: 2000px; }
  .code-tabs { display: flex; border-bottom: 1px solid var(--border); padding: 0 1rem; }
  .code-tab {
    padding: 0.6rem 1rem;
    font-size: 0.8rem;
    cursor: pointer;
    color: var(--text3);
    border-bottom: 2px solid transparent;
    transition: all 0.2s;
    font-family: 'Space Mono', monospace;
  }
  .code-tab.active { color: var(--accent1); border-bottom-color: var(--accent1); }
  .code-content { display: none; padding: 1rem 1.5rem; }
  .code-content.active { display: block; }
  pre {
    background: var(--bg);
    border: 1px solid var(--border);
    border-radius: 8px;
    padding: 1.25rem;
    overflow-x: auto;
    font-family: 'Space Mono', monospace;
    font-size: 0.78rem;
    line-height: 1.7;
    color: #e2e8f0;
  }
  .kw { color: #c792ea; }
  .fn { color: #82aaff; }
  .st { color: #c3e88d; }
  .cm { color: #546e7a; }
  .ty { color: #ffcb6b; }
  .nm { color: #f78c6c; }
  .op { color: #89ddff; }

  /* DIAGRAM */
  .diagram-area {
    background: var(--bg);
    border: 1px solid var(--border);
    border-radius: 8px;
    padding: 1.5rem;
    margin-top: 1rem;
    min-height: 120px;
    display: flex; align-items: center; justify-content: center;
  }
  .diagram { display: flex; align-items: center; gap: 0.5rem; flex-wrap: wrap; justify-content: center; }
  .d-box {
    background: var(--bg3);
    border: 1px solid var(--border);
    border-radius: 8px;
    padding: 0.6rem 1rem;
    font-size: 0.8rem;
    text-align: center;
    min-width: 90px;
  }
  .d-box.highlight { border-color: var(--accent1); color: var(--accent1); }
  .d-arrow { color: var(--text3); font-size: 1.2rem; }
  .d-interface { border-style: dashed; border-color: rgba(124,58,237,0.5); color: #a78bfa; }

  /* SOLID SECTION */
  .solid-grid { display: grid; grid-template-columns: repeat(auto-fill, minmax(300px, 1fr)); gap: 1.5rem; }
  .solid-card {
    background: var(--card);
    border: 1px solid rgba(245,158,11,0.2);
    border-radius: 16px;
    padding: 1.5rem;
    transition: all 0.3s;
  }
  .solid-card:hover { border-color: rgba(245,158,11,0.5); transform: translateY(-4px); }
  .solid-letter {
    font-family: 'Space Mono', monospace;
    font-size: 3rem;
    font-weight: 700;
    color: var(--accent4);
    opacity: 0.3;
    float: right;
  }
  .solid-name { font-weight: 700; font-size: 1rem; margin-bottom: 0.5rem; }
  .solid-full { font-size: 0.8rem; color: var(--accent4); margin-bottom: 0.75rem; font-family: 'Space Mono', monospace; }
  .solid-desc { color: var(--text2); font-size: 0.9rem; margin-bottom: 1rem; }
  .solid-example {
    background: var(--bg3);
    border-radius: 8px;
    padding: 0.75rem;
    font-size: 0.8rem;
    color: var(--text2);
    border-left: 3px solid var(--accent4);
  }
  .solid-example strong { color: var(--accent4); display: block; margin-bottom: 0.25rem; font-size: 0.7rem; text-transform: uppercase; letter-spacing: 0.05em; }

  /* FILTER BAR */
  .filter-bar { display: flex; gap: 0.5rem; flex-wrap: wrap; margin-bottom: 2rem; }
  .filter-btn {
    padding: 0.4rem 1rem;
    border-radius: 2rem;
    border: 1px solid var(--border);
    background: transparent;
    color: var(--text3);
    font-family: 'DM Sans', sans-serif;
    font-size: 0.85rem;
    cursor: pointer;
    transition: all 0.2s;
  }
  .filter-btn:hover, .filter-btn.active { background: var(--accent1); color: var(--bg); border-color: var(--accent1); font-weight: 600; }

  /* SEARCH */
  .search-box {
    width: 100%; max-width: 400px;
    background: var(--card);
    border: 1px solid var(--border);
    border-radius: 8px;
    padding: 0.75rem 1rem;
    color: var(--text);
    font-family: 'DM Sans', sans-serif;
    font-size: 0.9rem;
    margin-bottom: 2rem;
    transition: border-color 0.2s;
  }
  .search-box:focus { outline: none; border-color: var(--accent1); }
  .search-box::placeholder { color: var(--text3); }

  /* CHEATSHEET */
  .cheatsheet { margin-top: 3rem; }
  .cheat-table {
    width: 100%;
    border-collapse: collapse;
    font-size: 0.85rem;
  }
  .cheat-table th {
    text-align: left;
    padding: 0.75rem 1rem;
    background: var(--bg2);
    color: var(--text3);
    font-family: 'Space Mono', monospace;
    font-size: 0.7rem;
    letter-spacing: 0.1em;
    text-transform: uppercase;
    border-bottom: 1px solid var(--border);
  }
  .cheat-table td {
    padding: 0.75rem 1rem;
    border-bottom: 1px solid rgba(30,45,71,0.5);
    vertical-align: top;
    color: var(--text2);
  }
  .cheat-table tr:hover td { background: var(--bg2); }
  .cheat-table td:first-child { color: var(--text); font-weight: 600; }

  /* QUIZ */
  .quiz-section { background: var(--bg2); border-radius: 16px; padding: 2rem; margin-top: 3rem; }
  .quiz-q { font-weight: 600; font-size: 1rem; margin-bottom: 1rem; }
  .quiz-opts { display: grid; gap: 0.5rem; }
  .quiz-opt {
    padding: 0.75rem 1rem;
    background: var(--card);
    border: 1px solid var(--border);
    border-radius: 8px;
    cursor: pointer;
    font-size: 0.9rem;
    transition: all 0.2s;
    color: var(--text);
  }
  .quiz-opt:hover { border-color: var(--accent1); }
  .quiz-opt.correct { border-color: var(--accent3); background: rgba(16,185,129,0.1); color: var(--accent3); }
  .quiz-opt.wrong { border-color: var(--accent5); background: rgba(239,68,68,0.1); color: var(--accent5); }
  .quiz-feedback { margin-top: 1rem; padding: 1rem; border-radius: 8px; font-size: 0.9rem; display: none; }
  .quiz-feedback.show { display: block; }
  .quiz-feedback.correct { background: rgba(16,185,129,0.1); border: 1px solid rgba(16,185,129,0.3); color: var(--accent3); }
  .quiz-feedback.wrong { background: rgba(239,68,68,0.1); border: 1px solid rgba(239,68,68,0.3); color: #fca5a5; }
  .quiz-nav { display: flex; gap: 1rem; margin-top: 1rem; align-items: center; justify-content: space-between; }
  .quiz-btn {
    padding: 0.6rem 1.5rem;
    background: var(--accent2);
    color: white;
    border: none;
    border-radius: 8px;
    cursor: pointer;
    font-family: 'DM Sans', sans-serif;
    font-size: 0.9rem;
    transition: opacity 0.2s;
  }
  .quiz-btn:hover { opacity: 0.8; }
  .quiz-progress { font-family: 'Space Mono', monospace; font-size: 0.8rem; color: var(--text3); }
  .score-badge { font-family: 'Space Mono', monospace; font-size: 1rem; color: var(--accent3); }

  /* ANIMATIONS */
  @keyframes fadeUp {
    from { opacity: 0; transform: translateY(20px); }
    to { opacity: 1; transform: translateY(0); }
  }
  @keyframes bounce {
    0%, 100% { transform: translateY(0); }
    50% { transform: translateY(8px); }
  }
  .fade-in {
    opacity: 0;
    transform: translateY(20px);
    transition: opacity 0.6s ease, transform 0.6s ease;
  }
  .fade-in.visible { opacity: 1; transform: translateY(0); }

  /* FLOATING PARTICLES */
  .particle {
    position: absolute;
    width: 4px; height: 4px;
    border-radius: 50%;
    background: var(--accent1);
    opacity: 0.4;
    animation: float linear infinite;
  }
  @keyframes float {
    0% { transform: translateY(100vh) translateX(0); opacity: 0; }
    10% { opacity: 0.4; }
    90% { opacity: 0.4; }
    100% { transform: translateY(-100px) translateX(20px); opacity: 0; }
  }

  /* FOOTER */
  footer {
    background: var(--bg2);
    border-top: 1px solid var(--border);
    padding: 3rem 2rem;
    text-align: center;
    color: var(--text3);
    font-size: 0.85rem;
  }
  footer strong { color: var(--accent1); }

  /* RESPONSIVE */
  @media (max-width: 640px) {
    .patterns-grid { grid-template-columns: 1fr; }
    .solid-grid { grid-template-columns: 1fr; }
    nav { padding: 0 1rem; }
  }

  .hidden { display: none !important; }
  .section-divider { border: none; border-top: 1px solid var(--border); margin: 2rem 0; }
</style>
</head>
<body>

<!-- HERO -->
<div class="hero" id="top">
  <div class="hero-bg"></div>
  <div class="grid-overlay"></div>
  <div id="particles"></div>
  <div class="hero-content">
    <span class="tag">üì± For Android & Flutter Developers</span>
    <h1>Design <span>Patterns</span><br>Decoded</h1>
    <p>Master software design patterns through visual diagrams, real-world analogies, and Android/Flutter code examples ‚Äî all in one place.</p>
    <div class="hero-stats">
      <div class="stat"><span class="stat-num">23+</span><span class="stat-lbl">Patterns</span></div>
      <div class="stat"><span class="stat-num">5</span><span class="stat-lbl">Categories</span></div>
      <div class="stat"><span class="stat-num">2</span><span class="stat-lbl">Languages</span></div>
    </div>
  </div>
  <div class="scroll-hint">scroll <div class="scroll-arrow"></div></div>
</div>

<!-- NAV -->
<nav>
  <div class="nav-logo">{ patterns }</div>
  <a href="#overview" onclick="setActive(this)">Overview</a>
  <a href="#creational" onclick="setActive(this)">Creational</a>
  <a href="#structural" onclick="setActive(this)">Structural</a>
  <a href="#behavioral" onclick="setActive(this)">Behavioral</a>
  <a href="#solid" onclick="setActive(this)">SOLID</a>
  <a href="#architectural" onclick="setActive(this)">Architecture</a>
  <a href="#cheatsheet" onclick="setActive(this)">Cheatsheet</a>
  <a href="#quiz" onclick="setActive(this)">Quiz</a>
</nav>

<!-- OVERVIEW -->
<section id="overview">
  <div class="section-header fade-in">
    <span class="section-label">// start here</span>
    <h2>What are Design Patterns?</h2>
    <p class="section-desc">Reusable solutions to commonly occurring problems in software design. Think of them as blueprints, not code.</p>
  </div>
  <div class="categories fade-in">
    <div class="cat-card creational" onclick="scrollTo('creational')">
      <div class="cat-icon">üèóÔ∏è</div>
      <div class="cat-title">Creational</div>
      <div class="cat-count">5 patterns</div>
    </div>
    <div class="cat-card structural" onclick="scrollTo('structural')">
      <div class="cat-icon">üß©</div>
      <div class="cat-title">Structural</div>
      <div class="cat-count">7 patterns</div>
    </div>
    <div class="cat-card behavioral" onclick="scrollTo('behavioral')">
      <div class="cat-icon">üîÑ</div>
      <div class="cat-title">Behavioral</div>
      <div class="cat-count">11 patterns</div>
    </div>
    <div class="cat-card solid" onclick="scrollTo('solid')">
      <div class="cat-icon">üß±</div>
      <div class="cat-title">SOLID</div>
      <div class="cat-count">5 principles</div>
    </div>
    <div class="cat-card arch" onclick="scrollTo('architectural')">
      <div class="cat-icon">üèõÔ∏è</div>
      <div class="cat-title">Architecture</div>
      <div class="cat-count">3 patterns</div>
    </div>
  </div>
</section>

<!-- CREATIONAL -->
<section id="creational" style="padding-top: 3rem;">
  <div class="section-header fade-in">
    <span class="section-label">// creational patterns</span>
    <h2 style="color: #a78bfa;">üèóÔ∏è Creational Patterns</h2>
    <p class="section-desc">Deal with object creation. Make your code flexible and reusable when creating objects.</p>
  </div>
  <input type="text" class="search-box" placeholder="üîç Search patterns..." id="searchBox" oninput="filterPatterns(this.value)">
  <div class="filter-bar">
    <button class="filter-btn active" onclick="filterByCategory('all', this)">All</button>
    <button class="filter-btn" onclick="filterByCategory('creational', this)" style="border-color:rgba(124,58,237,0.4);color:#a78bfa">Creational</button>
    <button class="filter-btn" onclick="filterByCategory('structural', this)" style="border-color:rgba(8,145,178,0.4);color:#67e8f9">Structural</button>
    <button class="filter-btn" onclick="filterByCategory('behavioral', this)" style="border-color:rgba(16,185,129,0.4);color:#6ee7b7">Behavioral</button>
  </div>
  <div class="patterns-grid" id="patternsGrid">

    <!-- SINGLETON -->
    <div class="pattern-card fade-in" data-cat="creational" data-name="singleton">
      <div class="card-header">
        <div class="card-icon" style="background:rgba(124,58,237,0.15)">üîí</div>
        <div class="card-meta">
          <div class="card-name">Singleton</div>
          <span class="card-cat cat-creational">Creational</span>
        </div>
      </div>
      <div class="card-body">
        <div class="card-desc">Ensures a class has <strong>only one instance</strong> and provides a global access point to it.</div>
        <div class="card-analogy"><strong>üí° Real-world analogy</strong>A country has ONE President. No matter how many times you "ask for the president," you always get the same one.</div>
        <div class="diagram-area">
          <div class="diagram">
            <div class="d-box">Client A</div><div class="d-arrow">‚Üí</div>
            <div class="d-box highlight">Singleton<br><small>_instance</small></div>
            <div class="d-arrow">‚Üê</div><div class="d-box">Client B</div>
          </div>
        </div>
        <br>
        <div class="card-platforms">
          <span class="platform-badge platform-android">Kotlin</span>
          <span class="platform-badge platform-flutter">Dart</span>
        </div>
      </div>
      <button class="expand-btn" onclick="toggleCode(this)">View Code <span class="arrow">‚ñº</span></button>
      <div class="code-panel">
        <div class="code-tabs">
          <div class="code-tab active" onclick="switchTab(this, 'kotlin-1')">Kotlin</div>
          <div class="code-tab" onclick="switchTab(this, 'dart-1')">Dart/Flutter</div>
          <div class="code-tab" onclick="switchTab(this, 'when-1')">When to use</div>
        </div>
        <div class="code-content active" id="kotlin-1"><pre><span class="cm">// Kotlin: Object declaration IS a Singleton</span>
<span class="kw">object</span> <span class="ty">AppDatabase</span> {
    <span class="kw">val</span> <span class="nm">instance</span>: <span class="ty">Room.Database</span> <span class="kw">get</span>() = <span class="nm">_db</span>
    <span class="kw">private var</span> <span class="nm">_db</span>: <span class="ty">AppDatabase</span>? = <span class="kw">null</span>

    <span class="kw">fun</span> <span class="fn">init</span>(context: <span class="ty">Context</span>) {
        <span class="nm">_db</span> = <span class="ty">Room</span>.databaseBuilder(
            context, <span class="ty">AppDatabase</span>::<span class="kw">class</span>.java, <span class="st">"app_db"</span>
        ).build()
    }
}

<span class="cm">// Usage - always same instance</span>
<span class="ty">AppDatabase</span>.<span class="fn">init</span>(applicationContext)
<span class="kw">val</span> <span class="nm">db</span> = <span class="ty">AppDatabase</span>.instance</pre></div>
        <div class="code-content" id="dart-1"><pre><span class="cm">// Dart: Named constructor pattern</span>
<span class="kw">class</span> <span class="ty">ApiService</span> {
  <span class="kw">static final</span> <span class="ty">ApiService</span> <span class="nm">_instance</span> = <span class="ty">ApiService</span>._internal();
  
  <span class="cm">// Factory returns same instance always</span>
  <span class="kw">factory</span> <span class="ty">ApiService</span>() => _instance;
  <span class="ty">ApiService</span>._internal();
  
  <span class="kw">Future</span>&lt;<span class="ty">Response</span>&gt; <span class="fn">get</span>(<span class="ty">String</span> url) async { <span class="cm">/* ... */</span> }
}

<span class="cm">// Usage</span>
<span class="kw">final</span> api1 = <span class="ty">ApiService</span>(); <span class="cm">// same instance</span>
<span class="kw">final</span> api2 = <span class="ty">ApiService</span>(); <span class="cm">// same instance</span>
<span class="fn">print</span>(identical(api1, api2)); <span class="cm">// true</span></pre></div>
        <div class="code-content" id="when-1"><pre><span class="cm">// ‚úÖ USE Singleton for:</span>
<span class="st">- Database connections (Room, SQLite)</span>
<span class="st">- Network clients (Retrofit, Dio)</span>
<span class="st">- Logger instances</span>
<span class="st">- SharedPreferences wrapper</span>
<span class="st">- Firebase instances</span>

<span class="cm">// ‚ùå AVOID for:</span>
<span class="st">- UI-related objects</span>
<span class="st">- Objects that need different configs</span>
<span class="st">- In tests (hard to mock/reset)</span>

<span class="cm">// üí° In Flutter, use GetIt or Riverpod</span>
<span class="cm">// for dependency injection instead</span></pre></div>
      </div>
    </div>

    <!-- FACTORY METHOD -->
    <div class="pattern-card fade-in" data-cat="creational" data-name="factory method">
      <div class="card-header">
        <div class="card-icon" style="background:rgba(124,58,237,0.15)">üè≠</div>
        <div class="card-meta">
          <div class="card-name">Factory Method</div>
          <span class="card-cat cat-creational">Creational</span>
        </div>
      </div>
      <div class="card-body">
        <div class="card-desc">Defines an interface for creating objects, but lets <strong>subclasses decide</strong> which class to instantiate.</div>
        <div class="card-analogy"><strong>üí° Real-world analogy</strong>A food truck üöö. You say "give me a burger," but the truck decides whether it's beef, chicken, or veggie based on the day.</div>
        <div class="diagram-area">
          <div class="diagram">
            <div class="d-box d-interface">Creator<br><small>createProduct()</small></div>
            <div class="d-arrow">‚Üí</div>
            <div style="display:flex;flex-direction:column;gap:0.3rem">
              <div class="d-box highlight">ProductA</div>
              <div class="d-box highlight">ProductB</div>
            </div>
          </div>
        </div>
        <br>
        <div class="card-platforms">
          <span class="platform-badge platform-android">Kotlin</span>
          <span class="platform-badge platform-flutter">Dart</span>
        </div>
      </div>
      <button class="expand-btn" onclick="toggleCode(this)">View Code <span class="arrow">‚ñº</span></button>
      <div class="code-panel">
        <div class="code-tabs">
          <div class="code-tab active" onclick="switchTab(this, 'kotlin-2')">Kotlin</div>
          <div class="code-tab" onclick="switchTab(this, 'dart-2')">Dart/Flutter</div>
        </div>
        <div class="code-content active" id="kotlin-2"><pre><span class="cm">// Android: Different notification creators</span>
<span class="kw">interface</span> <span class="ty">Notification</span> {
    <span class="kw">fun</span> <span class="fn">show</span>(message: <span class="ty">String</span>)
}

<span class="kw">abstract class</span> <span class="ty">NotificationCreator</span> {
    <span class="kw">abstract fun</span> <span class="fn">createNotification</span>(): <span class="ty">Notification</span>
    
    <span class="kw">fun</span> <span class="fn">notify</span>(msg: <span class="ty">String</span>) = <span class="fn">createNotification</span>().<span class="fn">show</span>(msg)
}

<span class="kw">class</span> <span class="ty">PushNotificationCreator</span> : <span class="ty">NotificationCreator</span>() {
    <span class="kw">override fun</span> <span class="fn">createNotification</span>() = <span class="ty">PushNotification</span>()
}
<span class="kw">class</span> <span class="ty">InAppNotificationCreator</span> : <span class="ty">NotificationCreator</span>() {
    <span class="kw">override fun</span> <span class="fn">createNotification</span>() = <span class="ty">InAppNotification</span>()
}</pre></div>
        <div class="code-content" id="dart-2"><pre><span class="cm">// Flutter: Widget factory</span>
<span class="kw">abstract class</span> <span class="ty">ButtonFactory</span> {
  <span class="ty">Widget</span> <span class="fn">createButton</span>(<span class="ty">String</span> label);
}

<span class="kw">class</span> <span class="ty">MaterialButtonFactory</span> <span class="kw">extends</span> <span class="ty">ButtonFactory</span> {
  <span class="op">@override</span>
  <span class="ty">Widget</span> <span class="fn">createButton</span>(<span class="ty">String</span> label) =>
    <span class="ty">ElevatedButton</span>(onPressed: () {}, child: <span class="ty">Text</span>(label));
}

<span class="kw">class</span> <span class="ty">CupertinoButtonFactory</span> <span class="kw">extends</span> <span class="ty">ButtonFactory</span> {
  <span class="op">@override</span>
  <span class="ty">Widget</span> <span class="fn">createButton</span>(<span class="ty">String</span> label) =>
    <span class="ty">CupertinoButton</span>(onPressed: () {}, child: <span class="ty">Text</span>(label));
}</pre></div>
      </div>
    </div>

    <!-- BUILDER -->
    <div class="pattern-card fade-in" data-cat="creational" data-name="builder">
      <div class="card-header">
        <div class="card-icon" style="background:rgba(124,58,237,0.15)">üîß</div>
        <div class="card-meta">
          <div class="card-name">Builder</div>
          <span class="card-cat cat-creational">Creational</span>
        </div>
      </div>
      <div class="card-body">
        <div class="card-desc">Constructs complex objects <strong>step-by-step</strong>. Separates construction from representation.</div>
        <div class="card-analogy"><strong>üí° Real-world analogy</strong>Ordering pizza üçï. You add toppings one by one: base ‚Üí sauce ‚Üí cheese ‚Üí toppings ‚Üí bake.</div>
        <div class="card-platforms">
          <span class="platform-badge platform-android">Kotlin</span>
          <span class="platform-badge platform-flutter">Dart</span>
        </div>
      </div>
      <button class="expand-btn" onclick="toggleCode(this)">View Code <span class="arrow">‚ñº</span></button>
      <div class="code-panel">
        <div class="code-tabs">
          <div class="code-tab active" onclick="switchTab(this, 'kotlin-3')">Kotlin</div>
          <div class="code-tab" onclick="switchTab(this, 'dart-3')">Dart/Flutter</div>
        </div>
        <div class="code-content active" id="kotlin-3"><pre><span class="cm">// Kotlin: AlertDialog.Builder is a classic example!</span>
<span class="ty">AlertDialog</span>.<span class="ty">Builder</span>(context)
    .<span class="fn">setTitle</span>(<span class="st">"Confirm"</span>)
    .<span class="fn">setMessage</span>(<span class="st">"Are you sure?"</span>)
    .<span class="fn">setPositiveButton</span>(<span class="st">"Yes"</span>) { _, _ -> <span class="fn">doAction</span>() }
    .<span class="fn">setNegativeButton</span>(<span class="st">"No"</span>, <span class="kw">null</span>)
    .<span class="fn">setCancelable</span>(<span class="kw">false</span>)
    .<span class="fn">show</span>()

<span class="cm">// Custom builder pattern</span>
<span class="kw">class</span> <span class="ty">HttpRequest</span> <span class="kw">private constructor</span>(<span class="kw">val</span> url: <span class="ty">String</span>, <span class="kw">val</span> method: <span class="ty">String</span>) {
    <span class="kw">class</span> <span class="ty">Builder</span>(private <span class="kw">val</span> url: <span class="ty">String</span>) {
        <span class="kw">private var</span> <span class="nm">method</span> = <span class="st">"GET"</span>
        <span class="kw">fun</span> <span class="fn">method</span>(m: <span class="ty">String</span>) = <span class="fn">also</span> { method = m }
        <span class="kw">fun</span> <span class="fn">build</span>() = <span class="ty">HttpRequest</span>(url, method)
    }
}</pre></div>
        <div class="code-content" id="dart-3"><pre><span class="cm">// Dart: Cascade notation (..) is Builder-like!</span>
<span class="kw">final</span> paint = <span class="ty">Paint</span>()
  ..color = <span class="ty">Colors</span>.blue
  ..strokeWidth = 2.0
  ..style = <span class="ty">PaintingStyle</span>.stroke;

<span class="cm">// Custom Builder</span>
<span class="kw">class</span> <span class="ty">QueryBuilder</span> {
  <span class="ty">String</span> _table = <span class="st">''</span>;
  <span class="ty">List</span>&lt;<span class="ty">String</span>&gt; _conditions = [];
  
  <span class="ty">QueryBuilder</span> <span class="fn">from</span>(<span class="ty">String</span> table) { _table = table; <span class="kw">return this</span>; }
  <span class="ty">QueryBuilder</span> <span class="fn">where</span>(<span class="ty">String</span> cond) { _conditions.add(cond); <span class="kw">return this</span>; }
  <span class="ty">String</span> <span class="fn">build</span>() => <span class="st">'SELECT * FROM $_table WHERE ${_conditions.join(" AND ")}'</span>;
}
<span class="cm">// Usage: QueryBuilder().from('users').where('active=1').build()</span></pre></div>
      </div>
    </div>

    <!-- OBSERVER -->
    <div class="pattern-card fade-in" data-cat="behavioral" data-name="observer">
      <div class="card-header">
        <div class="card-icon" style="background:rgba(16,185,129,0.15)">üëÅÔ∏è</div>
        <div class="card-meta">
          <div class="card-name">Observer</div>
          <span class="card-cat cat-behavioral">Behavioral</span>
        </div>
      </div>
      <div class="card-body">
        <div class="card-desc">Defines a <strong>one-to-many dependency</strong> so that when one object changes state, all dependents are notified automatically.</div>
        <div class="card-analogy"><strong>üí° Real-world analogy</strong>YouTube subscriptions üì∫. When a creator uploads, ALL subscribers get notified ‚Äî not just one.</div>
        <div class="diagram-area">
          <div class="diagram">
            <div class="d-box highlight">Subject<br><small>notifyAll()</small></div>
            <div class="d-arrow">‚Üí</div>
            <div style="display:flex;flex-direction:column;gap:0.3rem">
              <div class="d-box">Observer 1</div>
              <div class="d-box">Observer 2</div>
              <div class="d-box">Observer 3</div>
            </div>
          </div>
        </div>
        <br>
        <div class="card-platforms">
          <span class="platform-badge platform-android">LiveData / Flow</span>
          <span class="platform-badge platform-flutter">Stream / ChangeNotifier</span>
        </div>
      </div>
      <button class="expand-btn" onclick="toggleCode(this)">View Code <span class="arrow">‚ñº</span></button>
      <div class="code-panel">
        <div class="code-tabs">
          <div class="code-tab active" onclick="switchTab(this, 'kotlin-obs')">Kotlin (LiveData)</div>
          <div class="code-tab" onclick="switchTab(this, 'dart-obs')">Flutter (ChangeNotifier)</div>
        </div>
        <div class="code-content active" id="kotlin-obs"><pre><span class="cm">// Android: LiveData IS the Observer pattern!</span>
<span class="kw">class</span> <span class="ty">CartViewModel</span> : <span class="ty">ViewModel</span>() {
    <span class="kw">private val</span> <span class="nm">_items</span> = <span class="ty">MutableLiveData</span>&lt;<span class="ty">List</span>&lt;<span class="ty">Item</span>&gt;&gt;()
    <span class="kw">val</span> <span class="nm">items</span>: <span class="ty">LiveData</span>&lt;<span class="ty">List</span>&lt;<span class="ty">Item</span>&gt;&gt; = _items

    <span class="kw">fun</span> <span class="fn">addItem</span>(item: <span class="ty">Item</span>) {
        <span class="nm">_items</span>.value = <span class="nm">_items</span>.value.orEmpty() + item
    }
}

<span class="cm">// Fragment observes (subscribes)</span>
viewModel.items.<span class="fn">observe</span>(viewLifecycleOwner) { items ->
    <span class="nm">adapter</span>.<span class="fn">submitList</span>(items) <span class="cm">// auto-update UI</span>
}</pre></div>
        <div class="code-content" id="dart-obs"><pre><span class="cm">// Flutter: ChangeNotifier = Observer pattern</span>
<span class="kw">class</span> <span class="ty">CartProvider</span> <span class="kw">extends</span> <span class="ty">ChangeNotifier</span> {
  <span class="ty">List</span>&lt;<span class="ty">Item</span>&gt; _items = [];
  <span class="ty">List</span>&lt;<span class="ty">Item</span>&gt; <span class="kw">get</span> items => _items;

  <span class="kw">void</span> <span class="fn">addItem</span>(<span class="ty">Item</span> item) {
    _items.add(item);
    <span class="fn">notifyListeners</span>(); <span class="cm">// notifies all observers!</span>
  }
}

<span class="cm">// Widget observes (subscribes)</span>
<span class="ty">Consumer</span>&lt;<span class="ty">CartProvider</span>&gt;(
  builder: (ctx, cart, _) => <span class="ty">Text</span>(<span class="st">'Items: ${cart.items.length}'</span>),
)</pre></div>
      </div>
    </div>

    <!-- ADAPTER -->
    <div class="pattern-card fade-in" data-cat="structural" data-name="adapter">
      <div class="card-header">
        <div class="card-icon" style="background:rgba(8,145,178,0.15)">üîå</div>
        <div class="card-meta">
          <div class="card-name">Adapter</div>
          <span class="card-cat cat-structural">Structural</span>
        </div>
      </div>
      <div class="card-body">
        <div class="card-desc">Converts the interface of a class into another interface that clients expect. <strong>Makes incompatible interfaces work together.</strong></div>
        <div class="card-analogy"><strong>üí° Real-world analogy</strong>A power adapter ‚ö°. Your US laptop (3-pin) works in Europe (2-pin) via an adapter. Neither changes, the adapter bridges them.</div>
        <div class="card-platforms">
          <span class="platform-badge platform-android">RecyclerView.Adapter</span>
          <span class="platform-badge platform-flutter">Dart</span>
        </div>
      </div>
      <button class="expand-btn" onclick="toggleCode(this)">View Code <span class="arrow">‚ñº</span></button>
      <div class="code-panel">
        <div class="code-tabs">
          <div class="code-tab active" onclick="switchTab(this, 'kotlin-adp')">Kotlin</div>
          <div class="code-tab" onclick="switchTab(this, 'dart-adp')">Dart</div>
        </div>
        <div class="code-content active" id="kotlin-adp"><pre><span class="cm">// RecyclerView.Adapter IS the Adapter pattern!</span>
<span class="cm">// Your List<User> ‚Üí RecyclerView understands it</span>

<span class="kw">class</span> <span class="ty">UserAdapter</span>(<span class="kw">private val</span> users: <span class="ty">List</span>&lt;<span class="ty">User</span>&gt;) 
    : <span class="ty">RecyclerView</span>.<span class="ty">Adapter</span>&lt;<span class="ty">UserAdapter</span>.<span class="ty">ViewHolder</span>&gt;() {
    
    <span class="kw">inner class</span> <span class="ty">ViewHolder</span>(view: <span class="ty">View</span>) : <span class="ty">RecyclerView</span>.<span class="ty">ViewHolder</span>(view)
    
    <span class="kw">override fun</span> <span class="fn">onBindViewHolder</span>(holder: <span class="ty">ViewHolder</span>, pos: <span class="ty">Int</span>) {
        <span class="cm">// Adapt User data ‚Üí View</span>
        holder.itemView.<span class="fn">findViewById</span>&lt;<span class="ty">TextView</span>&gt;(<span class="nm">R</span>.id.name).text = users[pos].name
    }
    <span class="kw">override fun</span> <span class="fn">getItemCount</span>() = users.size
    <span class="kw">override fun</span> <span class="fn">onCreateViewHolder</span>(...) = <span class="ty">ViewHolder</span>(...)
}</pre></div>
        <div class="code-content" id="dart-adp"><pre><span class="cm">// Adapt an old API to a new interface</span>
<span class="kw">class</span> <span class="ty">OldPaymentService</span> {
  <span class="kw">void</span> <span class="fn">processCard</span>(<span class="ty">String</span> num, <span class="ty">double</span> amount) { <span class="cm">/* old API */</span> }
}

<span class="kw">abstract class</span> <span class="ty">PaymentGateway</span> {
  <span class="kw">void</span> <span class="fn">pay</span>(<span class="ty">Payment</span> p); <span class="cm">// new interface</span>
}

<span class="cm">// Adapter bridges old ‚Üí new</span>
<span class="kw">class</span> <span class="ty">OldPaymentAdapter</span> <span class="kw">implements</span> <span class="ty">PaymentGateway</span> {
  <span class="kw">final</span> <span class="ty">OldPaymentService</span> _old = <span class="ty">OldPaymentService</span>();
  
  <span class="op">@override</span>
  <span class="kw">void</span> <span class="fn">pay</span>(<span class="ty">Payment</span> p) {
    _old.<span class="fn">processCard</span>(p.cardNumber, p.amount); <span class="cm">// translate</span>
  }
}</pre></div>
      </div>
    </div>

    <!-- DECORATOR -->
    <div class="pattern-card fade-in" data-cat="structural" data-name="decorator">
      <div class="card-header">
        <div class="card-icon" style="background:rgba(8,145,178,0.15)">üéÅ</div>
        <div class="card-meta">
          <div class="card-name">Decorator</div>
          <span class="card-cat cat-structural">Structural</span>
        </div>
      </div>
      <div class="card-body">
        <div class="card-desc">Attaches <strong>additional responsibilities to an object dynamically</strong>. Provides a flexible alternative to subclassing.</div>
        <div class="card-analogy"><strong>üí° Real-world analogy</strong>Gift wrapping üéÅ. A book is a book, but you can wrap it, add ribbon, and add a bow ‚Äî each adding behavior without changing the book.</div>
        <div class="card-platforms">
          <span class="platform-badge platform-android">OkHttp Interceptors</span>
          <span class="platform-badge platform-flutter">Widget decoration</span>
        </div>
      </div>
      <button class="expand-btn" onclick="toggleCode(this)">View Code <span class="arrow">‚ñº</span></button>
      <div class="code-panel">
        <div class="code-tabs">
          <div class="code-tab active" onclick="switchTab(this, 'kotlin-dec')">Kotlin</div>
          <div class="code-tab" onclick="switchTab(this, 'dart-dec')">Flutter</div>
        </div>
        <div class="code-content active" id="kotlin-dec"><pre><span class="cm">// OkHttp Interceptors ARE Decorators!</span>
<span class="kw">class</span> <span class="ty">AuthInterceptor</span> : <span class="ty">Interceptor</span> {
    <span class="kw">override fun</span> <span class="fn">intercept</span>(chain: <span class="ty">Interceptor</span>.<span class="ty">Chain</span>): <span class="ty">Response</span> {
        <span class="kw">val</span> request = chain.request().<span class="fn">newBuilder</span>()
            .<span class="fn">addHeader</span>(<span class="st">"Authorization"</span>, <span class="st">"Bearer $token"</span>)
            .<span class="fn">build</span>()
        <span class="kw">return</span> chain.<span class="fn">proceed</span>(request) <span class="cm">// decorates & delegates</span>
    }
}
<span class="cm">// Adding behavior (auth) without changing OkHttpClient!</span>
<span class="ty">OkHttpClient</span>.<span class="ty">Builder</span>()
    .<span class="fn">addInterceptor</span>(<span class="ty">AuthInterceptor</span>())
    .<span class="fn">build</span>()</pre></div>
        <div class="code-content" id="dart-dec"><pre><span class="cm">// Flutter widgets ARE Decorators!</span>
<span class="cm">// Each widget wraps and adds behavior</span>
<span class="ty">Padding</span>(              <span class="cm">// adds padding</span>
  padding: <span class="ty">EdgeInsets</span>.all(<span class="nm">16</span>),
  child: <span class="ty">Opacity</span>(    <span class="cm">// adds transparency</span>
    opacity: <span class="nm">0.8</span>,
    child: <span class="ty">Card</span>(       <span class="cm">// adds elevation</span>
      child: <span class="ty">Text</span>(<span class="st">'Hello'</span>) <span class="cm">// the actual content</span>
    ),
  ),
)</pre></div>
      </div>
    </div>

    <!-- STRATEGY -->
    <div class="pattern-card fade-in" data-cat="behavioral" data-name="strategy">
      <div class="card-header">
        <div class="card-icon" style="background:rgba(16,185,129,0.15)">üéØ</div>
        <div class="card-meta">
          <div class="card-name">Strategy</div>
          <span class="card-cat cat-behavioral">Behavioral</span>
        </div>
      </div>
      <div class="card-body">
        <div class="card-desc">Defines a family of algorithms, encapsulates each one, and makes them <strong>interchangeable at runtime</strong>.</div>
        <div class="card-analogy"><strong>üí° Real-world analogy</strong>Navigation app üó∫Ô∏è. You choose a route strategy: fastest, shortest, avoid-tolls. Same destination, different algorithm.</div>
        <div class="card-platforms">
          <span class="platform-badge platform-android">Kotlin</span>
          <span class="platform-badge platform-flutter">Dart</span>
        </div>
      </div>
      <button class="expand-btn" onclick="toggleCode(this)">View Code <span class="arrow">‚ñº</span></button>
      <div class="code-panel">
        <div class="code-tabs">
          <div class="code-tab active" onclick="switchTab(this, 'kotlin-str')">Kotlin</div>
          <div class="code-tab" onclick="switchTab(this, 'dart-str')">Dart</div>
        </div>
        <div class="code-content active" id="kotlin-str"><pre><span class="cm">// Payment strategy example</span>
<span class="kw">interface</span> <span class="ty">PaymentStrategy</span> {
    <span class="kw">fun</span> <span class="fn">pay</span>(amount: <span class="ty">Double</span>)
}
<span class="kw">class</span> <span class="ty">CreditCardPayment</span> : <span class="ty">PaymentStrategy</span> {
    <span class="kw">override fun</span> <span class="fn">pay</span>(amount: <span class="ty">Double</span>) = <span class="fn">println</span>(<span class="st">"Card: $amount"</span>)
}
<span class="kw">class</span> <span class="ty">UPIPayment</span> : <span class="ty">PaymentStrategy</span> {
    <span class="kw">override fun</span> <span class="fn">pay</span>(amount: <span class="ty">Double</span>) = <span class="fn">println</span>(<span class="st">"UPI: $amount"</span>)
}
<span class="kw">class</span> <span class="ty">Checkout</span>(<span class="kw">private var</span> strategy: <span class="ty">PaymentStrategy</span>) {
    <span class="kw">fun</span> <span class="fn">setStrategy</span>(s: <span class="ty">PaymentStrategy</span>) { strategy = s }
    <span class="kw">fun</span> <span class="fn">processPayment</span>(amount: <span class="ty">Double</span>) = strategy.<span class="fn">pay</span>(amount)
}</pre></div>
        <div class="code-content" id="dart-str"><pre><span class="cm">// Dart: Using function types as strategies</span>
<span class="kw">typedef</span> <span class="ty">SortStrategy</span>&lt;T&gt; = <span class="ty">List</span>&lt;T&gt; <span class="ty">Function</span>(<span class="ty">List</span>&lt;T&gt; items);

<span class="ty">List</span>&lt;<span class="ty">Product</span>&gt; <span class="fn">sortByPrice</span>(<span class="ty">List</span>&lt;<span class="ty">Product</span>&gt; items) {
  <span class="kw">return</span> [...items]..sort((a, b) => a.price.<span class="fn">compareTo</span>(b.price));
}
<span class="ty">List</span>&lt;<span class="ty">Product</span>&gt; <span class="fn">sortByRating</span>(<span class="ty">List</span>&lt;<span class="ty">Product</span>&gt; items) {
  <span class="kw">return</span> [...items]..sort((a, b) => b.rating.<span class="fn">compareTo</span>(a.rating));
}

<span class="kw">class</span> <span class="ty">ProductList</span> {
  <span class="ty">SortStrategy</span>&lt;<span class="ty">Product</span>&gt; sortStrategy = sortByPrice;
  <span class="kw">void</span> <span class="fn">display</span>(<span class="ty">List</span>&lt;<span class="ty">Product</span>&gt; items) {
    <span class="kw">final</span> sorted = <span class="fn">sortStrategy</span>(items);
    <span class="cm">// show sorted items</span>
  }
}</pre></div>
      </div>
    </div>

    <!-- REPOSITORY -->
    <div class="pattern-card fade-in" data-cat="arch" data-name="repository">
      <div class="card-header">
        <div class="card-icon" style="background:rgba(239,68,68,0.15)">üì¶</div>
        <div class="card-meta">
          <div class="card-name">Repository</div>
          <span class="card-cat cat-arch">Architecture</span>
        </div>
      </div>
      <div class="card-body">
        <div class="card-desc">Mediates between the domain and data mapping layers. <strong>Abstracts the data source</strong> (API, DB, cache) from business logic.</div>
        <div class="card-analogy"><strong>üí° Real-world analogy</strong>A librarian üìö. You ask for "a book on design patterns" ‚Äî you don't care if it's in the main shelf, storage, or being ordered online. Librarian handles that.</div>
        <div class="diagram-area">
          <div class="diagram">
            <div class="d-box highlight">ViewModel</div>
            <div class="d-arrow">‚Üí</div>
            <div class="d-box d-interface">Repository<br><small>(interface)</small></div>
            <div class="d-arrow">‚Üí</div>
            <div style="display:flex;flex-direction:column;gap:0.3rem">
              <div class="d-box">Room DB</div>
              <div class="d-box">Remote API</div>
              <div class="d-box">Cache</div>
            </div>
          </div>
        </div>
        <br>
        <div class="card-platforms">
          <span class="platform-badge platform-android">MVVM + Room</span>
          <span class="platform-badge platform-flutter">BLoC / Provider</span>
        </div>
      </div>
      <button class="expand-btn" onclick="toggleCode(this)">View Code <span class="arrow">‚ñº</span></button>
      <div class="code-panel">
        <div class="code-tabs">
          <div class="code-tab active" onclick="switchTab(this, 'kotlin-repo')">Kotlin (Android)</div>
          <div class="code-tab" onclick="switchTab(this, 'dart-repo')">Dart (Flutter)</div>
        </div>
        <div class="code-content active" id="kotlin-repo"><pre><span class="cm">// Interface - abstract the data source</span>
<span class="kw">interface</span> <span class="ty">UserRepository</span> {
    <span class="kw">suspend fun</span> <span class="fn">getUser</span>(id: <span class="ty">Int</span>): <span class="ty">User</span>
    <span class="kw">suspend fun</span> <span class="fn">saveUser</span>(user: <span class="ty">User</span>)
}

<span class="cm">// Implementation decides: DB or API?</span>
<span class="kw">class</span> <span class="ty">UserRepositoryImpl</span>(
    <span class="kw">private val</span> api: <span class="ty">UserApi</span>,
    <span class="kw">private val</span> dao: <span class="ty">UserDao</span>
) : <span class="ty">UserRepository</span> {
    <span class="kw">override suspend fun</span> <span class="fn">getUser</span>(id: <span class="ty">Int</span>): <span class="ty">User</span> {
        <span class="kw">return</span> dao.<span class="fn">getUser</span>(id) ?: api.<span class="fn">fetchUser</span>(id).<span class="kw">also</span> { dao.<span class="fn">insert</span>(it) }
    }
}
<span class="cm">// ViewModel only knows the interface!</span>
<span class="kw">class</span> <span class="ty">UserViewModel</span>(<span class="kw">private val</span> repo: <span class="ty">UserRepository</span>) : <span class="ty">ViewModel</span>()</pre></div>
        <div class="code-content" id="dart-repo"><pre><span class="cm">// Flutter Repository Pattern</span>
<span class="kw">abstract class</span> <span class="ty">ProductRepository</span> {
  <span class="ty">Future</span>&lt;<span class="ty">List</span>&lt;<span class="ty">Product</span>&gt;&gt; <span class="fn">getProducts</span>();
  <span class="ty">Future</span>&lt;<span class="ty">void</span>&gt; <span class="fn">saveProduct</span>(<span class="ty">Product</span> p);
}

<span class="kw">class</span> <span class="ty">ProductRepositoryImpl</span> <span class="kw">implements</span> <span class="ty">ProductRepository</span> {
  <span class="kw">final</span> <span class="ty">ApiClient</span> _api;
  <span class="kw">final</span> <span class="ty">LocalDatabase</span> _db;
  
  <span class="op">@override</span>
  <span class="ty">Future</span>&lt;<span class="ty">List</span>&lt;<span class="ty">Product</span>&gt;&gt; <span class="fn">getProducts</span>() <span class="kw">async</span> {
    <span class="kw">try</span> {
      <span class="kw">final</span> remote = <span class="kw">await</span> _api.<span class="fn">fetchProducts</span>();
      <span class="kw">await</span> _db.<span class="fn">cacheProducts</span>(remote);
      <span class="kw">return</span> remote;
    } <span class="kw">catch</span> (_) {
      <span class="kw">return await</span> _db.<span class="fn">getCachedProducts</span>(); <span class="cm">// fallback</span>
    }
  }
}</pre></div>
      </div>
    </div>

    <!-- MVP COMMAND -->
    <div class="pattern-card fade-in" data-cat="behavioral" data-name="command">
      <div class="card-header">
        <div class="card-icon" style="background:rgba(16,185,129,0.15)">üìã</div>
        <div class="card-meta">
          <div class="card-name">Command</div>
          <span class="card-cat cat-behavioral">Behavioral</span>
        </div>
      </div>
      <div class="card-body">
        <div class="card-desc">Encapsulates a request as an object. Enables <strong>undoable operations, queuing,</strong> and logging of requests.</div>
        <div class="card-analogy"><strong>üí° Real-world analogy</strong>A TV remote üì∫. Each button is a command. You can queue commands (macros) and even undo the last one.</div>
        <div class="card-platforms">
          <span class="platform-badge platform-android">Kotlin</span>
          <span class="platform-badge platform-flutter">Dart</span>
        </div>
      </div>
      <button class="expand-btn" onclick="toggleCode(this)">View Code <span class="arrow">‚ñº</span></button>
      <div class="code-panel">
        <div class="code-tabs">
          <div class="code-tab active" onclick="switchTab(this, 'kotlin-cmd')">Kotlin</div>
        </div>
        <div class="code-content active" id="kotlin-cmd"><pre><span class="kw">interface</span> <span class="ty">Command</span> {
    <span class="kw">fun</span> <span class="fn">execute</span>()
    <span class="kw">fun</span> <span class="fn">undo</span>()
}
<span class="kw">class</span> <span class="ty">AddToCartCommand</span>(<span class="kw">val</span> cart: <span class="ty">Cart</span>, <span class="kw">val</span> item: <span class="ty">Item</span>) : <span class="ty">Command</span> {
    <span class="kw">override fun</span> <span class="fn">execute</span>() { cart.<span class="fn">add</span>(item) }
    <span class="kw">override fun</span> <span class="fn">undo</span>() { cart.<span class="fn">remove</span>(item) }
}
<span class="kw">class</span> <span class="ty">CommandHistory</span> {
    <span class="kw">private val</span> stack = <span class="ty">ArrayDeque</span>&lt;<span class="ty">Command</span>&gt;()
    <span class="kw">fun</span> <span class="fn">execute</span>(cmd: <span class="ty">Command</span>) { cmd.<span class="fn">execute</span>(); stack.<span class="fn">addLast</span>(cmd) }
    <span class="kw">fun</span> <span class="fn">undo</span>() { stack.<span class="fn">removeLastOrNull</span>()?.undo() }
}</pre></div>
      </div>
    </div>
  </div><!-- end patterns grid -->
</section>

<!-- SOLID PRINCIPLES -->
<section id="solid">
  <div class="section-header fade-in">
    <span class="section-label">// principles</span>
    <h2 style="color: #fcd34d;">üß± SOLID Principles</h2>
    <p class="section-desc">Five principles for writing clean, maintainable, scalable object-oriented code. Every senior dev interview asks about these.</p>
  </div>
  <div class="solid-grid">
    <div class="solid-card fade-in">
      <div class="solid-letter">S</div>
      <div class="solid-name">Single Responsibility</div>
      <div class="solid-full">S ‚Äî Single Responsibility Principle</div>
      <div class="solid-desc">A class should have <strong>only one reason to change</strong>. Each class does one thing, and does it well.</div>
      <div class="solid-example">
        <strong>‚ùå Bad (Android)</strong>UserActivity handles UI + API calls + DB writes.<br><br>
        <strong>‚úÖ Good</strong>UserActivity (UI) ‚Üí UserViewModel (logic) ‚Üí UserRepository (data). Each has ONE job.
      </div>
    </div>
    <div class="solid-card fade-in">
      <div class="solid-letter">O</div>
      <div class="solid-name">Open/Closed</div>
      <div class="solid-full">O ‚Äî Open/Closed Principle</div>
      <div class="solid-desc">Classes should be <strong>open for extension, closed for modification</strong>. Add new behavior without changing existing code.</div>
      <div class="solid-example">
        <strong>‚úÖ Flutter Example</strong>Add a new payment method (CryptoPayment) by implementing PaymentStrategy interface ‚Äî no existing code changes needed.
      </div>
    </div>
    <div class="solid-card fade-in">
      <div class="solid-letter">L</div>
      <div class="solid-name">Liskov Substitution</div>
      <div class="solid-full">L ‚Äî Liskov Substitution Principle</div>
      <div class="solid-desc">Objects of a subclass should be <strong>replaceable with objects of their superclass</strong> without breaking the app.</div>
      <div class="solid-example">
        <strong>‚úÖ Kotlin Example</strong>If UserRepository is expected, UserRepositoryImpl (or MockUserRepository in tests) must work seamlessly as drop-in replacements.
      </div>
    </div>
    <div class="solid-card fade-in">
      <div class="solid-letter">I</div>
      <div class="solid-name">Interface Segregation</div>
      <div class="solid-full">I ‚Äî Interface Segregation Principle</div>
      <div class="solid-desc">Clients should <strong>not be forced to depend on interfaces they don't use</strong>. Prefer many small, specific interfaces.</div>
      <div class="solid-example">
        <strong>‚ùå Bad</strong>interface Animal { fun fly(); fun swim(); fun run() }<br>
        <strong>‚úÖ Good</strong>interface Flyable, Swimmable, Runnable ‚Äî implement only what you need.
      </div>
    </div>
    <div class="solid-card fade-in">
      <div class="solid-letter">D</div>
      <div class="solid-name">Dependency Inversion</div>
      <div class="solid-full">D ‚Äî Dependency Inversion Principle</div>
      <div class="solid-desc">Depend on <strong>abstractions, not concretions</strong>. High-level modules shouldn't depend on low-level modules.</div>
      <div class="solid-example">
        <strong>‚úÖ Android (Hilt/Dagger)</strong>ViewModel depends on UserRepository (interface), not UserRepositoryImpl. Injection provides the real impl (or mock in tests).
      </div>
    </div>
  </div>
</section>

<!-- ARCHITECTURAL PATTERNS -->
<section id="architectural">
  <div class="section-header fade-in">
    <span class="section-label">// architecture</span>
    <h2 style="color: #fca5a5;">üèõÔ∏è Architectural Patterns</h2>
    <p class="section-desc">High-level patterns for structuring your entire app ‚Äî not just a class.</p>
  </div>
  <div class="patterns-grid">
    <div class="pattern-card fade-in" data-cat="arch">
      <div class="card-header">
        <div class="card-icon" style="background:rgba(239,68,68,0.15)">üìê</div>
        <div class="card-meta">
          <div class="card-name">MVVM</div>
          <span class="card-cat cat-arch">Architecture</span>
        </div>
      </div>
      <div class="card-body">
        <div class="card-desc"><strong>Model-View-ViewModel</strong> ‚Äî The standard for Android. ViewModel holds UI state, View observes changes, Model is data/business logic.</div>
        <div class="diagram-area">
          <div class="diagram">
            <div class="d-box">Model<br><small>Data + Logic</small></div>
            <div class="d-arrow">‚Üî</div>
            <div class="d-box highlight">ViewModel<br><small>State + Events</small></div>
            <div class="d-arrow">‚Üê</div>
            <div class="d-box">View<br><small>UI only</small></div>
          </div>
        </div>
        <br>
        <div class="card-platforms">
          <span class="platform-badge platform-android">Android Standard</span>
          <span class="platform-badge platform-flutter">Provider / Riverpod</span>
        </div>
      </div>
      <button class="expand-btn" onclick="toggleCode(this)">View Code <span class="arrow">‚ñº</span></button>
      <div class="code-panel">
        <div class="code-tabs">
          <div class="code-tab active" onclick="switchTab(this, 'kotlin-mvvm')">Kotlin (Android)</div>
          <div class="code-tab" onclick="switchTab(this, 'dart-mvvm')">Dart (Flutter)</div>
        </div>
        <div class="code-content active" id="kotlin-mvvm"><pre><span class="cm">// MODEL</span>
<span class="kw">data class</span> <span class="ty">User</span>(<span class="kw">val</span> id: <span class="ty">Int</span>, <span class="kw">val</span> name: <span class="ty">String</span>)

<span class="cm">// VIEWMODEL - holds state, exposes LiveData</span>
<span class="kw">class</span> <span class="ty">UserViewModel</span>(<span class="kw">private val</span> repo: <span class="ty">UserRepository</span>) : <span class="ty">ViewModel</span>() {
    <span class="kw">val</span> <span class="nm">user</span> = <span class="ty">MutableStateFlow</span>&lt;<span class="ty">UiState</span>&lt;<span class="ty">User</span>&gt;&gt;(<span class="ty">UiState</span>.<span class="ty">Loading</span>)
    
    <span class="kw">fun</span> <span class="fn">loadUser</span>(id: <span class="ty">Int</span>) {
        <span class="fn">viewModelScope</span>.<span class="fn">launch</span> {
            user.value = <span class="ty">UiState</span>.<span class="ty">Success</span>(repo.<span class="fn">getUser</span>(id))
        }
    }
}

<span class="cm">// VIEW - observes, never has logic</span>
viewModel.user.<span class="fn">collect</span> { state ->
    <span class="kw">when</span>(state) {
        <span class="kw">is</span> <span class="ty">UiState</span>.<span class="ty">Success</span> -> binding.name.text = state.data.name
        <span class="kw">is</span> <span class="ty">UiState</span>.<span class="ty">Loading</span> -> binding.progress.<span class="fn">show</span>()
    }
}</pre></div>
        <div class="code-content" id="dart-mvvm"><pre><span class="cm">// Flutter with Provider (MVVM-like)</span>
<span class="cm">// MODEL</span>
<span class="kw">class</span> <span class="ty">User</span> { <span class="kw">final</span> <span class="ty">String</span> name; <span class="ty">User</span>(<span class="kw">this</span>.name); }

<span class="cm">// VIEWMODEL (ChangeNotifier)</span>
<span class="kw">class</span> <span class="ty">UserViewModel</span> <span class="kw">extends</span> <span class="ty">ChangeNotifier</span> {
  <span class="ty">User</span>? _user;
  <span class="kw">bool</span> _loading = <span class="kw">false</span>;
  
  <span class="ty">User</span>? <span class="kw">get</span> user => _user;
  <span class="kw">bool</span> <span class="kw">get</span> loading => _loading;
  
  <span class="kw">Future</span>&lt;<span class="kw">void</span>&gt; <span class="fn">loadUser</span>() <span class="kw">async</span> {
    _loading = <span class="kw">true</span>; <span class="fn">notifyListeners</span>();
    _user = <span class="kw">await</span> _repo.<span class="fn">getUser</span>();
    _loading = <span class="kw">false</span>; <span class="fn">notifyListeners</span>();
  }
}

<span class="cm">// VIEW - just reads state, no logic</span>
<span class="ty">Consumer</span>&lt;<span class="ty">UserViewModel</span>&gt;(builder: (ctx, vm, _) =>
  vm.loading ? <span class="ty">CircularProgressIndicator</span>() : <span class="ty">Text</span>(vm.user?.name ?? <span class="st">''</span>)
)</pre></div>
      </div>
    </div>

    <div class="pattern-card fade-in" data-cat="arch">
      <div class="card-header">
        <div class="card-icon" style="background:rgba(239,68,68,0.15)">üîÄ</div>
        <div class="card-meta">
          <div class="card-name">MVI (Uni-directional)</div>
          <span class="card-cat cat-arch">Architecture</span>
        </div>
      </div>
      <div class="card-body">
        <div class="card-desc"><strong>Model-View-Intent</strong>. Strict uni-directional data flow. User creates Intents ‚Üí Model updates ‚Üí View renders. Popular in Compose & Flutter BLoC.</div>
        <div class="diagram-area">
          <div class="diagram">
            <div class="d-box">View</div>
            <div class="d-arrow">‚Üí Intent ‚Üí</div>
            <div class="d-box highlight">Reducer</div>
            <div class="d-arrow">‚Üí State ‚Üí</div>
            <div class="d-box">View</div>
          </div>
        </div>
        <br>
        <div class="card-platforms">
          <span class="platform-badge platform-android">Compose + Orbit</span>
          <span class="platform-badge platform-flutter">BLoC pattern</span>
        </div>
      </div>
      <button class="expand-btn" onclick="toggleCode(this)">View Code <span class="arrow">‚ñº</span></button>
      <div class="code-panel">
        <div class="code-tabs">
          <div class="code-tab active" onclick="switchTab(this, 'dart-mvi')">Flutter (BLoC)</div>
        </div>
        <div class="code-content active" id="dart-mvi"><pre><span class="cm">// Flutter BLoC = MVI pattern</span>
<span class="cm">// EVENTS (Intents)</span>
<span class="kw">abstract class</span> <span class="ty">CounterEvent</span> {}
<span class="kw">class</span> <span class="ty">IncrementEvent</span> <span class="kw">extends</span> <span class="ty">CounterEvent</span> {}
<span class="kw">class</span> <span class="ty">DecrementEvent</span> <span class="kw">extends</span> <span class="ty">CounterEvent</span> {}

<span class="cm">// STATE</span>
<span class="kw">class</span> <span class="ty">CounterState</span> { <span class="kw">final int</span> count; <span class="ty">CounterState</span>(<span class="kw">this</span>.count); }

<span class="cm">// BLOC (Reducer)</span>
<span class="kw">class</span> <span class="ty">CounterBloc</span> <span class="kw">extends</span> <span class="ty">Bloc</span>&lt;<span class="ty">CounterEvent</span>, <span class="ty">CounterState</span>&gt; {
  <span class="ty">CounterBloc</span>() : <span class="kw">super</span>(<span class="ty">CounterState</span>(<span class="nm">0</span>)) {
    <span class="fn">on</span>&lt;<span class="ty">IncrementEvent</span>&gt;((e, emit) => emit(<span class="ty">CounterState</span>(state.count + <span class="nm">1</span>)));
    <span class="fn">on</span>&lt;<span class="ty">DecrementEvent</span>&gt;((e, emit) => emit(<span class="ty">CounterState</span>(state.count - <span class="nm">1</span>)));
  }
}
<span class="cm">// Data always flows ONE direction: Event ‚Üí BLoC ‚Üí State ‚Üí UI</span></pre></div>
      </div>
    </div>
  </div>
</section>

<!-- CHEATSHEET -->
<section id="cheatsheet">
  <div class="section-header fade-in">
    <span class="section-label">// quick reference</span>
    <h2>üìã Cheatsheet</h2>
    <p class="section-desc">When to use which pattern ‚Äî at a glance.</p>
  </div>
  <div class="cheatsheet fade-in">
    <table class="cheat-table">
      <thead>
        <tr>
          <th>Pattern</th>
          <th>Category</th>
          <th>Use When</th>
          <th>Android/Flutter</th>
        </tr>
      </thead>
      <tbody>
        <tr><td>Singleton</td><td><span class="card-cat cat-creational">Creational</span></td><td>Need one shared instance globally</td><td>DB, Network client, Logger</td></tr>
        <tr><td>Factory Method</td><td><span class="card-cat cat-creational">Creational</span></td><td>Subclasses decide which object to create</td><td>Widget factories, View creators</td></tr>
        <tr><td>Builder</td><td><span class="card-cat cat-creational">Creational</span></td><td>Complex object with many optional params</td><td>AlertDialog.Builder, Retrofit.Builder</td></tr>
        <tr><td>Observer</td><td><span class="card-cat cat-behavioral">Behavioral</span></td><td>One state change ‚Üí many updates needed</td><td>LiveData, Flow, ChangeNotifier, Streams</td></tr>
        <tr><td>Adapter</td><td><span class="card-cat cat-structural">Structural</span></td><td>Incompatible interfaces need to work together</td><td>RecyclerView.Adapter, API adapters</td></tr>
        <tr><td>Decorator</td><td><span class="card-cat cat-structural">Structural</span></td><td>Add behavior without subclassing</td><td>OkHttp Interceptors, Flutter widget nesting</td></tr>
        <tr><td>Strategy</td><td><span class="card-cat cat-behavioral">Behavioral</span></td><td>Multiple algorithms, switchable at runtime</td><td>Payment methods, Sort strategies</td></tr>
        <tr><td>Repository</td><td><span class="card-cat cat-arch">Architecture</span></td><td>Abstract data sources from business logic</td><td>All Android/Flutter MVVM apps</td></tr>
        <tr><td>Command</td><td><span class="card-cat cat-behavioral">Behavioral</span></td><td>Need undo/redo or queueable operations</td><td>Text editors, Action history</td></tr>
        <tr><td>MVVM</td><td><span class="card-cat cat-arch">Architecture</span></td><td>Structuring entire app with reactive UI</td><td>Android standard, Flutter with Provider</td></tr>
        <tr><td>MVI/BLoC</td><td><span class="card-cat cat-arch">Architecture</span></td><td>Strict uni-directional data flow needed</td><td>Flutter BLoC, Compose + Orbit</td></tr>
      </tbody>
    </table>
  </div>
</section>

<!-- QUIZ -->
<section id="quiz">
  <div class="section-header fade-in">
    <span class="section-label">// test yourself</span>
    <h2>üß† Quick Quiz</h2>
    <p class="section-desc">Solidify your knowledge. Get all 5 right!</p>
  </div>
  <div class="quiz-section fade-in">
    <div id="quizContainer"></div>
    <div class="quiz-nav">
      <div class="quiz-progress" id="quizProgress">Question 1 / 5</div>
      <div class="score-badge" id="scoreDisplay"></div>
      <button class="quiz-btn" id="nextBtn" onclick="nextQuestion()" style="display:none">Next ‚Üí</button>
      <button class="quiz-btn" id="restartBtn" onclick="restartQuiz()" style="display:none">Restart üîÑ</button>
    </div>
  </div>
</section>

<footer>
  <p>Built for <strong>Android & Flutter Developers</strong> üì±</p>
  <p style="margin-top: 0.5rem">References: <strong>refactoring.guru</strong> ¬∑ <strong>GoF Design Patterns</strong> ¬∑ Android Architecture Components</p>
  <p style="margin-top: 0.5rem; color: var(--text3)">Creational ¬∑ Structural ¬∑ Behavioral ¬∑ SOLID ¬∑ Architecture</p>
</footer>

<script>
// PARTICLES
function createParticles() {
  const container = document.getElementById('particles');
  for (let i = 0; i < 15; i++) {
    const p = document.createElement('div');
    p.className = 'particle';
    p.style.left = Math.random() * 100 + '%';
    p.style.animationDuration = (8 + Math.random() * 12) + 's';
    p.style.animationDelay = (-Math.random() * 20) + 's';
    p.style.width = p.style.height = (2 + Math.random() * 3) + 'px';
    const colors = ['#00d4ff', '#7c3aed', '#10b981'];
    p.style.background = colors[Math.floor(Math.random() * colors.length)];
    container.appendChild(p);
  }
}
createParticles();

// SCROLL ANIMATIONS
const observer = new IntersectionObserver((entries) => {
  entries.forEach(e => { if (e.isIntersecting) e.target.classList.add('visible'); });
}, { threshold: 0.1 });
document.querySelectorAll('.fade-in').forEach(el => observer.observe(el));

// NAV
function setActive(el) {
  document.querySelectorAll('nav a').forEach(a => a.classList.remove('active'));
  el.classList.add('active');
}
function scrollTo(id) {
  document.getElementById(id).scrollIntoView({ behavior: 'smooth' });
}

// CODE EXPAND
function toggleCode(btn) {
  const panel = btn.nextElementSibling;
  panel.classList.toggle('open');
  btn.classList.toggle('open');
  btn.innerHTML = panel.classList.contains('open') ? 'Hide Code <span class="arrow">‚ñº</span>' : 'View Code <span class="arrow">‚ñº</span>';
}

function switchTab(tab, contentId) {
  const card = tab.closest('.code-panel');
  card.querySelectorAll('.code-tab').forEach(t => t.classList.remove('active'));
  card.querySelectorAll('.code-content').forEach(c => c.classList.remove('active'));
  tab.classList.add('active');
  document.getElementById(contentId).classList.add('active');
}

// FILTER
function filterByCategory(cat, btn) {
  document.querySelectorAll('.filter-btn').forEach(b => b.classList.remove('active'));
  btn.classList.add('active');
  document.querySelectorAll('.pattern-card').forEach(card => {
    if (cat === 'all' || card.dataset.cat === cat) {
      card.classList.remove('hidden');
    } else {
      card.classList.add('hidden');
    }
  });
}

function filterPatterns(query) {
  const q = query.toLowerCase();
  document.querySelectorAll('.pattern-card').forEach(card => {
    const name = card.dataset.name || '';
    card.classList.toggle('hidden', q.length > 0 && !name.includes(q));
  });
}

// QUIZ DATA
const quizData = [
  {
    q: "In Android, LiveData and ChangeNotifier in Flutter are implementations of which pattern?",
    opts: ["Singleton", "Observer", "Decorator", "Strategy"],
    correct: 1,
    explanation: "‚úÖ LiveData and ChangeNotifier implement the Observer pattern ‚Äî multiple UI components subscribe and get notified when state changes."
  },
  {
    q: "RecyclerView.Adapter in Android bridges your List<Data> to what the RecyclerView expects. This is the...",
    opts: ["Builder Pattern", "Factory Method", "Adapter Pattern", "Command Pattern"],
    correct: 2,
    explanation: "‚úÖ Adapter Pattern! It converts the interface your data has (List<User>) into the interface RecyclerView needs (ViewHolder + getItemCount)."
  },
  {
    q: "Which SOLID principle says 'A class should have only one reason to change'?",
    opts: ["Open/Closed", "Liskov Substitution", "Interface Segregation", "Single Responsibility"],
    correct: 3,
    explanation: "‚úÖ Single Responsibility Principle (SRP)! Your Activity handles UI, ViewModel handles logic, Repository handles data ‚Äî each has ONE reason to change."
  },
  {
    q: "Flutter's widget nesting (Padding ‚Üí Opacity ‚Üí Card ‚Üí Text) is an example of which pattern?",
    opts: ["Composite", "Decorator", "Builder", "Proxy"],
    correct: 1,
    explanation: "‚úÖ Decorator Pattern! Each widget wraps another, adding behavior (padding, opacity, elevation) dynamically without changing the inner widget."
  },
  {
    q: "In MVVM, which layer should contain your API call logic and database queries?",
    opts: ["View (Activity/Fragment)", "ViewModel", "Repository (Model)", "XML layout"],
    correct: 2,
    explanation: "‚úÖ Repository/Model layer! The ViewModel should only orchestrate data flow. The Repository decides whether to fetch from API or return cached DB data."
  }
];

let currentQ = 0, score = 0, answered = false;

function renderQuestion() {
  const qData = quizData[currentQ];
  const container = document.getElementById('quizContainer');
  container.innerHTML = `
    <div class="quiz-q">Q${currentQ + 1}: ${qData.q}</div>
    <div class="quiz-opts">
      ${qData.opts.map((opt, i) => `<div class="quiz-opt" onclick="selectAnswer(${i})">${String.fromCharCode(65+i)}) ${opt}</div>`).join('')}
    </div>
    <div class="quiz-feedback" id="feedback"></div>
  `;
  document.getElementById('quizProgress').textContent = `Question ${currentQ + 1} / ${quizData.length}`;
  document.getElementById('nextBtn').style.display = 'none';
  document.getElementById('restartBtn').style.display = 'none';
  answered = false;
}

function selectAnswer(idx) {
  if (answered) return;
  answered = true;
  const qData = quizData[currentQ];
  const opts = document.querySelectorAll('.quiz-opt');
  opts[idx].classList.add(idx === qData.correct ? 'correct' : 'wrong');
  opts[qData.correct].classList.add('correct');
  if (idx === qData.correct) score++;
  const fb = document.getElementById('feedback');
  fb.textContent = qData.explanation;
  fb.className = 'quiz-feedback show ' + (idx === qData.correct ? 'correct' : 'wrong');
  if (currentQ < quizData.length - 1) {
    document.getElementById('nextBtn').style.display = 'block';
  } else {
    const pct = Math.round((score / quizData.length) * 100);
    document.getElementById('scoreDisplay').textContent = `Score: ${score}/${quizData.length} (${pct}%) ${pct >= 80 ? 'üèÜ' : pct >= 60 ? 'üëç' : 'üìö'}`;
    document.getElementById('restartBtn').style.display = 'block';
  }
}

function nextQuestion() {
  currentQ++;
  renderQuestion();
}

function restartQuiz() {
  currentQ = 0; score = 0;
  document.getElementById('scoreDisplay').textContent = '';
  renderQuestion();
}

renderQuestion();
</script>
</body>
</html>
